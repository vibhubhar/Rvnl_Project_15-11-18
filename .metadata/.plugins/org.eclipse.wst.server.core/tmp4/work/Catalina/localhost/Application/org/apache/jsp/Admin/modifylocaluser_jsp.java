/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.86
 * Generated at: 2018-05-29 05:02:27 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.Admin;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import java.net.HttpURLConnection;
import javax.servlet.*;
import javax.servlet.http.*;
import java.util.*;
import javax.naming.*;
import java.sql.*;
import javax.sql.*;
import javax.servlet.*;
import java.util.*;
import javax.servlet.http.*;
import javax.naming.*;
import java.sql.*;
import javax.sql.*;
import javax.mail.*;
import javax.mail.internet.*;
import java.net.URL.*;
import java.io.*;
import java.net.URLEncoder.*;
import java.net.URLConnection.*;
import java.io.InputStreamReader.*;
import java.io.OutputStreamWriter.*;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.*;

public final class modifylocaluser_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(4);
    _jspx_dependants.put("/Admin/included/NewHeader1.jsp", Long.valueOf(1526644595896L));
    _jspx_dependants.put("/WEB-INF/sessionCheck1.jspf", Long.valueOf(1524567358000L));
    _jspx_dependants.put("/Admin/included/Newfooter.jsp", Long.valueOf(1526628672412L));
    _jspx_dependants.put("/Admin/sessionCheck.jsp", Long.valueOf(1524567356000L));
  }

  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fif_0026_005ftest;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource;

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
    _005fjspx_005ftagPool_005fc_005fif_0026_005ftest = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
  }

  public void _jspDestroy() {
    _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.release();
    _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource.release();
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=ISO-8859-1");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 1120256, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

 
int timeout = session.getMaxInactiveInterval();
response.setHeader("Refresh", timeout + "; URL = admn_login.jsp");

      out.write("\r\n");
      out.write("\r\n");
      out.write("<!DOCTYPE html>\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\" />\r\n");
      out.write("<meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\r\n");
      out.write("<link rel=\"stylesheet\" href=\"/Application/Admin/resources/bootstrap-3.3.7-dist/css1/bootstrap.css\"/>\r\n");
      out.write("<link rel=\"stylesheet\" href=\"/Application/Admin/resources/bootstrap-3.3.7-dist/css1/bootstrap-theme.css\"/> \r\n");
      out.write("<link rel=\"stylesheet\" href=\"/Application/Admin/resources/css/main.css\"/>\t\r\n");
      out.write("\t\t");

 String theme3 = (String) pageContext.getAttribute("myTheme", PageContext.SESSION_SCOPE);
		System.out.println("Theme="+theme3);
 
      out.write("\r\n");
      out.write("\t\t\r\n");
      out.write("<meta charset=\"ISO-8859-1\">\r\n");
      out.write("<title>PDAMS</title>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<style>\r\n");
      out.write(".white-marquee {\r\n");
      out.write("   font-family: arial, calibri, \"Times New Roman\", Times, serif;\r\n");
      out.write("\tfont-size: 16px;\r\n");
      out.write("\tcolor: white;// blue;//white;\r\n");
      out.write("\t//margin-left:50px;\r\n");
      out.write("\tfont-weight:bold;\r\n");
      out.write("\tpadding:5px;\r\n");
      out.write("\tpadding-bottom:5px;\r\n");
      out.write("}\r\n");
      out.write(".marquee_section {\r\n");
      out.write("\twidth: 73%;\r\n");
      out.write("\tfloat: right;\r\n");
      out.write("\tline-height: 64px;\r\n");
      out.write("\theight: 65px;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("</style>\r\n");
      out.write("\r\n");
      out.write("</head>\r\n");
      out.write("<body>   \r\n");

//String mailstatus=(String)session.getAttribute("MailStatus"); 
//String user = (String) session.getAttribute("user_name");
String user_code = (String) session.getAttribute("User_Code");
if (user_code!=null) {} else {user_code="0";}
 String mq=null,  mqLaunch=null, mqMaint=null, mqOther=null, mqRly=null, mqRVNL=null;					
// System.out.println("code="+user_code);	
  Connection conn7 = null;
     			PreparedStatement ps777=null;
     			ResultSet  rs777=null;
     						//Statement stmt7 = null;
     						try {
     							Context initCtx = new InitialContext();
     							Context envCtx = (Context) initCtx.lookup("java:comp/env");
     							DataSource ds = (DataSource) envCtx.lookup("jdbc/MySQLDB");

     							conn7 = ds.getConnection();
     							String sql35 = "select item, description from xx_maintenance";
     									
    								ps777 = conn7.prepareStatement(sql35);
    								rs777 = ps777.executeQuery();
    								while (rs777.next()) {
    									String item=rs777.getString(1);
    									 String desc=rs777.getString(2);
    									if (item.equalsIgnoreCase("marquee-launch")) {
    										mqLaunch=desc;
    									} else if (item.equalsIgnoreCase("marquee-maint")) {
    										mqMaint=desc;
    									} else if (item.equalsIgnoreCase("marquee-other")) {
    										mqOther=desc;
    									} else if (item.equalsIgnoreCase("marquee-Rly")) {
    										mqRly=desc;
    									} else if (item.equalsIgnoreCase("marquee-RVNL")) {
    										mqRVNL=desc;
    									} 
    								}
    								if (user_code.equalsIgnoreCase("2")) {
    									mq= mqLaunch+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+mqMaint+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+mqOther+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+mqRly;
    								} else if (user_code.equalsIgnoreCase("5")) {
    									mq= mqLaunch+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+mqMaint+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+mqOther+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+mqRVNL;
    								} else {
    								mq= mqLaunch+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+mqMaint+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+mqOther;
    								} 		 
    								//System.out.println("marquee="+mq);			
     						}catch(Exception e){
    							
    							e.printStackTrace();
    						} finally {
    						    try { rs777.close(); } catch (Exception e) { /* ignored */ }
    						    try { ps777.close(); } catch (Exception e) { /* ignored */ }
    						    try { conn7.close(); } catch (Exception e) { /* ignored */ }
    						}


      out.write("\r\n");
      out.write("  <input type=\"hidden\" id=\"menu1\" value='");
      out.print(session.getAttribute("user_name") );
      out.write("'> \r\n");
      out.write("  <!-- header -->\r\n");
      out.write("     \t   <div class=\"container-fluid top_bar\">\r\n");
      out.write("           <div class=\"row\">\r\n");
      out.write("           <div class=\"col-md-4 col-sm-4 col-xs-4\" >\r\n");
      out.write("           <img src=\"/Application/Admin/images/Rail_logo.png\" alt=\"\" class=\"img-responsive\"/>\r\n");
      out.write("           </div>\r\n");
      out.write("           <div class=\"col-md-4 col-sm-4 col-xs-4 top_middle_bar\">\r\n");
      out.write("           <h2 ><p class=\"text-white bg-dark\"><i>Project Documents Approval Monitoring System (PDAMS)</i></p></h2>\r\n");
      out.write("           </div>\r\n");
      out.write("           <div class=\"col-md-4 col-sm-4 col-xs-4 right_bar\" >\r\n");
      out.write("           <img src=\"/Application/Admin/images/RVNL_LOGO.jpg\" alt=\"\" class=\"img-responsive pull-right\"/>\r\n");
      out.write("           </div>\r\n");
      out.write(" \t\t   \r\n");
      out.write(" \t\t  \r\n");
      out.write("   \r\n");
      out.write(" \t\t \r\n");
      out.write("   \r\n");
      out.write("   </div>\r\n");
      out.write("   </div>\r\n");
      out.write("   <!-- end of header -->\r\n");
      out.write("\t   <div class=\"topmenu\" id=\"menu\">\r\n");
      out.write("\t  <div id=\"menu1\"  style=\"float:left;\"> \r\n");
      out.write("\t  \t\t<ul>\r\n");
      out.write("\t  \t\t\r\n");
      out.write("\t  \t\t<!-- <li><a href=\"user_index.jsp\">Add/Modify Docs</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"user_Project.jsp\">My Projects</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"Reportpiuinitiate.jsp\">My Reports</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"MoreInfo.jsp\">Returned Tasks</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"PullBack.jsp\">PullBack Doc</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"FinalApproval.jsp\">Docs under Approval</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"FinallyApprovedShow.jsp\">Approved Docs</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"ManualMail.jsp\">Reminders</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"User_List.jsp\">User List</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"changepasswordlocaladmin.jsp\">Change Password</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"helpmain.jsp\">Help</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"admn_logout.jsp\">Logout</a></li>  \r\n");
      out.write("\t   \t\t\t\t\t\t<li><a href=\"NewIndex.jsp\">Home</a></li> -->\r\n");
      out.write("\t   \t\t\t\t\t\r\n");
      out.write("\t   \t\t\t\t\t</ul>\t \r\n");
      out.write("\t   \t\t\t\t\t</div>  \t\r\n");
      out.write("\t   \t\t\t\t\t");

	   					if (!mq.equalsIgnoreCase("") && mq!=null) {       
	   					
      out.write("\t\t\t\t\r\n");
      out.write("\t   <div id=\"menu2\"  style=\"width:100%; float:right;\">     \t\t\t\t\t\r\n");
      out.write("\t   <marquee><span class=\"white-marquee\" id=\"white-marquee\" style=\"float:left;\">");
      out.print(mq );
      out.write("</span></marquee>  </div>\r\n");
      out.write("\t");

	}
	
      out.write("\t\r\n");
      out.write("\t</div> \r\n");
      out.write("\t<script type=\"text/javascript\" src=\"/Application/Admin/resources/bootstrap-3.3.7-dist/js/jquery-3.3.1.js\"></script> \r\n");
      out.write("   <script type=\"text/javascript\" src=\"/Application/Admin/resources/bootstrap-3.3.7-dist/js/bootstrap.js\"></script>  \t\t\t\t\t\r\n");
      out.write("</body>\r\n");
      out.write("</html>");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
 

int timeout1 = session.getMaxInactiveInterval();
response.setHeader("Refresh", timeout1 + "; URL = admn_login.jsp");

if(((String)session.getAttribute("user_name"))==null)
       {
           
	response.sendRedirect("admn_login.jsp");
           
       }
      out.write("\r\n");
      out.write("\r\n");
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\" />\r\n");
      out.write("<title>Create User</title>\r\n");
      out.write("<link href=\"resources/css/main.css\" rel=\"stylesheet\" type=\"text/css\">\r\n");
      out.write("<link href=\"resources/bootstrap/css/bootstrap.min.css\" rel=\"stylesheet\" />\r\n");
      out.write("<link href=\"resources/bootstrap/css/bootstrap.css\" rel=\"stylesheet\" />\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<script src=\"resources/JS/Approval_wf230.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("\tsrc=\"https://code.jquery.com/jquery-1.12.4.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("\tsrc=\"https://code.jquery.com/ui/1.12.1/jquery-ui.js\"></script>\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("\tsrc=\"http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js\"></script>\r\n");
      out.write("<script\r\n");
      out.write("\tsrc=\"http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.9/jquery-ui.js\"\r\n");
      out.write("\ttype=\"text/javascript\"></script>\r\n");
      out.write("<link\r\n");
      out.write("\thref=\"http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.9/themes/blitzer/jquery-ui.css\"\r\n");
      out.write("\trel=\"stylesheet\" type=\"text/css\" />\r\n");
      out.write("\r\n");
      out.write("\t\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("<style>\r\n");
      out.write("\r\n");
      out.write("#DivsionsDiv{\r\n");
      out.write("display:none;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("</style>\r\n");
      out.write("<script src=\"resources/JS/backButton.js\"></script>\r\n");
      out.write("<script src=\"resources/JS/validateSysAdmin230.js\"></script>\r\n");
      out.write("<script src=\"resources/JS/PIU_depend230.js\"></script>\r\n");
      out.write("<script src=\"resources/JS/Headquarter.js\"></script>\r\n");
      out.write("<script src=\"resources/JS/Reports230.js\"></script>\r\n");
      out.write("<script language=\"JavaScript1.2\">\r\n");
      out.write("function stopRKey(evt) { \r\n");
      out.write("\t  var evt = (evt) ? evt : ((event) ? event : null); \r\n");
      out.write("\t  var node = (evt.target) ? evt.target : ((evt.srcElement) ? evt.srcElement : null); \r\n");
      out.write("\t  if ((evt.keyCode == 13) && (node.type==\"text\"))  {return false;} \r\n");
      out.write("\t} \r\n");
      out.write("\r\n");
      out.write("\tdocument.onkeypress = stopRKey; \r\n");
      out.write("\r\n");
      out.write("   var testresults\r\n");
      out.write("    function checkemail1(){\r\n");
      out.write("        var str = document.getElementById(\"Email\").value;\r\n");
      out.write("        var filter = /^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i\r\n");
      out.write("        if (filter.test(str))\r\n");
      out.write("        \t{\r\n");
      out.write("        \t//document.getElementById(\"error4\").style.color=\"green\";\r\n");
      out.write("        \tdocument.getElementById(\"error4\").innerHTML=\"\";\r\n");
      out.write("        \tdocument.getElementById(\"btnclick\").disabled = false;\r\n");
      out.write("        \t\r\n");
      out.write("        \t testresults = true\r\n");
      out.write("        \t}\r\n");
      out.write("           \r\n");
      out.write("        else {\r\n");
      out.write("        \tdocument.getElementById(\"error4\").style.color=\"RED\";\r\n");
      out.write("        \tdocument.getElementById(\"error4\").innerHTML=\"Please Enter a Valid Email Address\";\r\n");
      out.write("        \tdocument.getElementById(\"btnclick\").disabled = true;\r\n");
      out.write("            testresults = false\r\n");
      out.write("        }\r\n");
      out.write("        return (testresults)\r\n");
      out.write("    }\r\n");
      out.write("</script>\r\n");
      out.write("\r\n");
      out.write("<script language=\"JavaScript1.2\">\r\n");
      out.write("\t\t\r\n");
      out.write("    var testresults\r\n");
      out.write("    function checkemail(){\r\n");
      out.write("        var str = document.getElementById(\"email_id\").value;\r\n");
      out.write("        var filter = /^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i\r\n");
      out.write("        if (filter.test(str))\r\n");
      out.write("        \t{\r\n");
      out.write("        \t//document.getElementById(\"error3\").style.color=\"green\";\r\n");
      out.write("        \tdocument.getElementById(\"error3\").innerHTML=\"\";\r\n");
      out.write("        \tdocument.getElementById(\"btnclick\").disabled = false;\r\n");
      out.write("        \t\r\n");
      out.write("        \t testresults = true\r\n");
      out.write("        \t}\r\n");
      out.write("           \r\n");
      out.write("        else {\r\n");
      out.write("        \tdocument.getElementById(\"error3\").style.color=\"RED\";\r\n");
      out.write("        \tdocument.getElementById(\"error3\").innerHTML=\"Please Enter a Valid Email Address\";\r\n");
      out.write("        \tdocument.getElementById(\"btnclick\").disabled = true;\r\n");
      out.write("            testresults = false\r\n");
      out.write("        }\r\n");
      out.write("        return (testresults)\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("</script>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\tfunction ValidateNo1() {\r\n");
      out.write("\t\tvar phoneNo = document.getElementById('Phone_Number');\r\n");
      out.write("\t\tif (phoneNo.value == \"\" || phoneNo.value == null) {\r\n");
      out.write("\t\t\tdocument.getElementById(\"error5\").style.color = \"RED\";\r\n");
      out.write("\t\t\tdocument.getElementById(\"error5\").innerHTML = \"Please Enter Your Mobile Number\";\r\n");
      out.write("\t\t\treturn false;\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\r\n");
      out.write("\t\t\tvar phoneno = /^\\d{10}$/;\r\n");
      out.write("\t\t\tif (phoneNo.value.match(phoneno)) { //document.getElementById(\"error5\").style.color=\"green\";\r\n");
      out.write("\t\t\t\tdocument.getElementById(\"error5\").innerHTML = \"\";\r\n");
      out.write("\t\t\t\tdocument.getElementById(\"btnclick\").disabled = false;\r\n");
      out.write("\t\t\t\treturn true;\r\n");
      out.write("\t\t\t} else {\r\n");
      out.write("\t\t\t\tdocument.getElementById(\"error5\").style.color = \"red\";\r\n");
      out.write("\t\t\t\tdocument.getElementById(\"error5\").innerHTML = \"Not a Valid Mobile Number\";\r\n");
      out.write("\t\t\t\tdocument.getElementById(\"btnclick\").disabled = true;\r\n");
      out.write("\t\t\t\treturn false;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\r\n");
      out.write("\t\talert(\"Success \");\r\n");
      out.write("\t\treturn true;\r\n");
      out.write("\t}\r\n");
      out.write("</script>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\tfunction ValidateNo() {\r\n");
      out.write("\t\tvar phoneNo = document.getElementById('contact_no');\r\n");
      out.write("\t\tif (phoneNo.value == \"\" || phoneNo.value == null) {\r\n");
      out.write("\t\t\tdocument.getElementById(\"error0\").style.color = \"RED\";\r\n");
      out.write("\t\t\tdocument.getElementById(\"error0\").innerHTML = \"Please Enter Your Mobile Number\";\r\n");
      out.write("\t\t\treturn false;\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\r\n");
      out.write("\t\t\tvar phoneno = /^\\d{10}$/;\r\n");
      out.write("\t\t\tif (phoneNo.value.match(phoneno)) { //document.getElementById(\"error0\").style.color=\"green\";\r\n");
      out.write("\t\t\t\tdocument.getElementById(\"error0\").innerHTML = \"\";\r\n");
      out.write("\t\t\t\tdocument.getElementById(\"btnclick\").disabled = false;\r\n");
      out.write("\t\t\t\treturn true;\r\n");
      out.write("\t\t\t} else {\r\n");
      out.write("\t\t\t\tdocument.getElementById(\"error0\").style.color = \"red\";\r\n");
      out.write("\t\t\t\tdocument.getElementById(\"error0\").innerHTML = \"Not a Valid Mobile Number\";\r\n");
      out.write("\t\t\t\tdocument.getElementById(\"btnclick\").disabled = true;\r\n");
      out.write("\t\t\t\treturn false;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\r\n");
      out.write("\t\talert(\"Success \");\r\n");
      out.write("\t\treturn true;\r\n");
      out.write("\t}\r\n");
      out.write("</script>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\t$(document).ready(function() {\r\n");
      out.write("\t\t$('input').on('keypress', function (event) {\r\n");
      out.write("\t\t    //var regex = new RegExp(\"^[a-zA-Z0-9]+$\");\r\n");
      out.write("\t\t    var regex = new RegExp(\"['?!<\\\">\\\\\\\\]+$\");\r\n");
      out.write("\t\t    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);\r\n");
      out.write("\t\t    if (regex.test(key)) {\r\n");
      out.write("\t\t       event.preventDefault();\r\n");
      out.write("\t\t       return false;\r\n");
      out.write("\t\t    }\r\n");
      out.write("\t  });\r\n");
      out.write(" \t\r\n");
      out.write("\t\t\r\n");
      out.write("\t\tif (document.getElementById(\"Email\")!=null) {\r\n");
      out.write("\t\t\tdocument.loginForm11.email_old.value=document.getElementById(\"Email\").value;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\tif (document.getElementById(\"Phone_Number\")!=null) {\r\n");
      out.write("\t\t\tdocument.loginForm11.no_old.value=document.getElementById(\"Phone_Number\").value;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t$('#Type').on('change', function() {\r\n");
      out.write("\t\t\tif (this.value == 'RVNL')\r\n");
      out.write("\t\t\t//............................\r\n");
      out.write("\t\t\t{\r\n");
      out.write("\t\t\t\t$(\"#business_RVNL\").show();\r\n");
      out.write("\t\t\t} else {\r\n");
      out.write("\t\t\t\t$(\"#business_RVNL\").hide();\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\r\n");
      out.write("\t\t\tif (this.value == 'MOR')\r\n");
      out.write("\t\t\t//.....................^.......\r\n");
      out.write("\t\t\t{\r\n");
      out.write("\t\t\t\t$(\"#business_MOR\").show();\r\n");
      out.write("\t\t\t} else {\r\n");
      out.write("\t\t\t\t$(\"#business_MOR\").hide();\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t\t$(\"input[name$='myRadios']\").click(function() {\r\n");
      out.write("\t\t\tvar test = $(this).val();\r\n");
      out.write("\t\t\t$(\"div.desc\").hide();\r\n");
      out.write("\t\t\t$(\"#User_\" + test).show();\r\n");
      out.write("\t\t});\r\n");
      out.write("\t});\r\n");
      out.write("</script>\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("\tsrc=\"http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\t$(function() {\r\n");
      out.write("\t\t$(\"#chkShowPassword\")\r\n");
      out.write("\t\t\t\t.bind(\r\n");
      out.write("\t\t\t\t\t\t\"click\",\r\n");
      out.write("\t\t\t\t\t\tfunction() {\r\n");
      out.write("\t\t\t\t\t\t\tvar password = $(\"#password\");\r\n");
      out.write("\t\t\t\t\t\t\tif ($(this).is(\":checked\")) {\r\n");
      out.write("\t\t\t\t\t\t\t\tpassword\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t.after('<input onchange = \"passwordChanged(this);\" id = \"txt_'\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t+ password.attr(\"id\")\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t+ '\" type = \"text\" value = \"'\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t+ password.val() + '\" />');\r\n");
      out.write("\t\t\t\t\t\t\t\tpassword.hide();\r\n");
      out.write("\t\t\t\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\t\t\t\tpassword.val(password.next().val());\r\n");
      out.write("\t\t\t\t\t\t\t\tpassword.next().remove();\r\n");
      out.write("\t\t\t\t\t\t\t\tpassword.show();\r\n");
      out.write("\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t});\r\n");
      out.write("\t});\r\n");
      out.write("\tfunction PasswordChanged(txt) {\r\n");
      out.write("\t\t$(txt).prev().val($(txt).val());\r\n");
      out.write("\t}\r\n");
      out.write("</script>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\t$(function() {\r\n");
      out.write("\t\t$(\"#chkShowPassword1\")\r\n");
      out.write("\t\t\t\t.bind(\r\n");
      out.write("\t\t\t\t\t\t\"click\",\r\n");
      out.write("\t\t\t\t\t\tfunction() {\r\n");
      out.write("\t\t\t\t\t\t\tvar password1 = $(\"#Password\");\r\n");
      out.write("\t\t\t\t\t\t\tif ($(this).is(\":checked\")) {\r\n");
      out.write("\t\t\t\t\t\t\t\tPassword\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t.after('<input onchange = \"passwordChanged1(this);\" id = \"txt_'\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t+ Password.attr(\"id\")\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t+ '\" type = \"text\" value = \"'\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t+ Password.val() + '\" />');\r\n");
      out.write("\t\t\t\t\t\t\t\tPassword.hide();\r\n");
      out.write("\t\t\t\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\t\t\t\tPassword.val(Password.next().val());\r\n");
      out.write("\t\t\t\t\t\t\t\tPassword.next().remove();\r\n");
      out.write("\t\t\t\t\t\t\t\tPassword.show();\r\n");
      out.write("\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t});\r\n");
      out.write("\t});\r\n");
      out.write("\tfunction passwordChanged1(txt) {\r\n");
      out.write("\t\t$(txt).prev().val($(txt).val());\r\n");
      out.write("\t}\r\n");
      out.write("</script>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\tfunction passwordChange1(passval) {\r\n");
      out.write("\t\t//` $('input[type=\"password\"]').prop('disabled', true);\r\n");
      out.write("\r\n");
      out.write("\t\tif (passval.length >= 5) {\r\n");
      out.write("\t\t\tdocument.getElementById(\"btnclick\").disabled = false;\r\n");
      out.write("\t\t\t//document.getElementById(\"error6\").style.color=\"GREEN\";\r\n");
      out.write("\t\t\tdocument.getElementById(\"error6\").innerHTML = \"\";\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\tdocument.getElementById(\"btnclick\").disabled = true;\r\n");
      out.write("\t\t\tdocument.getElementById(\"error6\").style.color = \"RED\";\r\n");
      out.write("\t\t\tdocument.getElementById(\"error6\").innerHTML = \"Please Provide password of atleast 5 chars.\";\r\n");
      out.write("\r\n");
      out.write("\t\t\t//alert(\"Please Provide password of atleast 5 chars.\");\r\n");
      out.write("\t\t}\r\n");
      out.write("\r\n");
      out.write("\t}\r\n");
      out.write("</script>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\tfunction passwordChange(passval) {\r\n");
      out.write("\t\t//` $('input[type=\"password\"]').prop('disabled', true);\r\n");
      out.write("\r\n");
      out.write("\t\tif (passval.length >= 5) {\r\n");
      out.write("\t\t\tdocument.getElementById(\"btnclick\").disabled = false;\r\n");
      out.write("\t\t\t//document.getElementById(\"error1\").style.color=\"GREEN\";\r\n");
      out.write("\t\t\tdocument.getElementById(\"error1\").innerHTML = \"\";\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\tdocument.getElementById(\"btnclick\").disabled = true;\r\n");
      out.write("\t\t\tdocument.getElementById(\"error1\").style.color = \"RED\";\r\n");
      out.write("\t\t\tdocument.getElementById(\"error1\").innerHTML = \"Please Provide password of atleast 5 chars.\";\r\n");
      out.write("\r\n");
      out.write("\t\t\t//alert(\"Please Provide password of atleast 5 chars.\");\r\n");
      out.write("\t\t}\r\n");
      out.write("\r\n");
      out.write("\t}\r\n");
      out.write("</script>\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\tfunction loadXMLDoc(element, er) {\r\n");
      out.write("\t\tvar xmlhttp;\r\n");
      out.write("\t\tvar k1 = document.getElementById(element).value;\r\n");
      out.write("\t\tvar k = encodeURIComponent(k1);\r\n");
      out.write("\t\tvar urls = \"pass.jsp?ver=\" + k;\r\n");
      out.write("\r\n");
      out.write("\t\tif (window.XMLHttpRequest) {\r\n");
      out.write("\t\t\txmlhttp = new XMLHttpRequest();\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\txmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\txmlhttp.onreadystatechange = function() {\r\n");
      out.write("\t\t\tif (xmlhttp.readyState == 4) {\r\n");
      out.write("\t\t\t\t//document.getElementById(\"err\").style.color=\"red\";\r\n");
      out.write("\t\t\t\tdocument.getElementById(er).innerHTML = xmlhttp.responseText;\r\n");
      out.write("\t\t\t\tvar ex = document.getElementById(\"exist\");\r\n");
      out.write("\t\t\t\tif (ex != null) {\r\n");
      out.write("\t\t\t\t\tdocument.getElementById(\"btnclick\").disabled = true;\r\n");
      out.write("\r\n");
      out.write("\t\t\t\t} else {\r\n");
      out.write("\r\n");
      out.write("\t\t\t\t\tdocument.getElementById(\"btnclick\").disabled = false;\r\n");
      out.write("\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\txmlhttp.open(\"GET\", urls, true);\r\n");
      out.write("\t\txmlhttp.send();\r\n");
      out.write("\t}\r\n");
      out.write("</script>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("    function refreshAndClose() {\r\n");
      out.write("    \t//location.replace(\"c_user.jsp\");\r\n");
      out.write("        window.opener.location.reload(true);\r\n");
      out.write("        window.close();\r\n");
      out.write("    }\r\n");
      out.write("</script>\r\n");
      out.write("<style>\r\n");
      out.write("\r\n");
      out.write("div.absolute {\r\n");
      out.write("   \tposition:absolute;\r\n");
      out.write("   \tmargin-top: 5px;\r\n");
      out.write("   \tmargin-left: 13px;\r\n");
      out.write("   \tmargin-bottom: 20px;\r\n");
      out.write(" \tpadding: 15 px;\r\n");
      out.write("    width: auto;\r\n");
      out.write("    height: 30px;\r\n");
      out.write("    border: 3px double #ff4d4d;\r\n");
      out.write("    background-color:#ffe6e6;\r\n");
      out.write("        }\r\n");
      out.write("    table.center {\r\n");
      out.write("    margin-left:auto; \r\n");
      out.write("    margin-right:auto;\r\n");
      out.write("  }\r\n");
      out.write("  \r\n");
      out.write("</style>\r\n");
      out.write("\r\n");
      out.write("</head>\r\n");
      out.write("\r\n");
      out.write("<body>\r\n");
      out.write("\t");

		String username1 = request.getParameter("usern");

		String username = username1.replace('~', '/');
	
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\t");

		int dep_id = 0, piu1 = 0, desig = 0, zoneid = 0, divisionid = 0;
		ResultSet rs3_1 = null;
		PreparedStatement ps3_1 = null;
		ResultSet rs1_1 = null, rs2 = null, rs2_1=null;
		PreparedStatement ps1_1 = null, ps2 = null, ps2_1=null;
		Connection conn = null;
		Statement stmt = null;

		String hier = null, s1 = null, s2 = null, s3 = null, s4 = null, s5 = null, s6 = null, s7 = null, type = null, no = null;
		java.util.ArrayList<String> userlistal = new java.util.ArrayList<String>();
		java.util.ArrayList<String> userlistal1 = new java.util.ArrayList<String>();
		java.util.ArrayList<String> userlistal111 = new java.util.ArrayList<String>();
		java.util.ArrayList<String> userlistal2 = new java.util.ArrayList<String>();
		java.util.ArrayList<String> packagelistal = new java.util.ArrayList<String>();
		DataSource ds = null;
		String zone_name = null, division_name = null;
		int userid = 0;

		try {

			Context initCtx = new InitialContext();
			Context envCtx = (Context) initCtx.lookup("java:comp/env");
			ds = (DataSource) envCtx.lookup("jdbc/MySQLDB");

			conn = ds.getConnection();

			String sql = "select * from xx_user_master where User_name='"+ username + "'";
			PreparedStatement ps = conn.prepareStatement(sql);
			ResultSet rs = ps.executeQuery();
			while (rs.next()) {
				userid = rs.getInt("User_ID");
				s1 = rs.getString("User_name");
				type = rs.getString("Type");
				s2 = rs.getString("Officer_name");

				s3 = rs.getString("Email_Id");
				no = rs.getString("Contact_No");
				dep_id = rs.getInt("Department_Id");
				desig = rs.getInt("Designation_Id");
				piu1 = rs.getInt("PIU_ID");
				

				String zonetest11 = "select  Zone_Name from xx_zones_master ";
				PreparedStatement pszone1 = conn.prepareStatement(zonetest11);
				ResultSet rszone_11 = pszone1.executeQuery();
				while (rszone_11.next()) {
						String s6111 = rszone_11.getString("Zone_Name");
						userlistal111.add(s6111);
						
					
				}
				
				
				
				String zonetest1 = "select DISTINCT Zone_ID from xx_user_zone_mapping where User_Id="
						+ userid;
				
				PreparedStatement pszone = conn.prepareStatement(zonetest1);
				ResultSet rszone_1 = pszone.executeQuery();
				while (rszone_1.next()) {
					String zone_id1 = rszone_1.getString("Zone_ID");
					userlistal.add(zone_id1);
					
					String zonedisplay = "select Zone_Name from xx_zones_master where Zone_Id="
							+ zone_id1+" order by Zone_Name";
					PreparedStatement ps3_11 = conn
							.prepareStatement(zonedisplay);
					ResultSet rs3_11 = ps3_11.executeQuery();
					while (rs3_11.next()) {
						String s611 = rs3_11.getString("Zone_Name");
						userlistal1.add(s611);
					}
						
				}
				String zonedisplay2 = "select distinct xx_document_mapping.zone from xx_document_mapping, xx_user_master where xx_document_mapping.submitted_by= xx_user_master.user_id and xx_user_master.piu_id="
								+ piu1+" order by xx_document_mapping.Zone";
						PreparedStatement ps3_12 = conn
								.prepareStatement(zonedisplay2);
						ResultSet rs3_12 = ps3_12.executeQuery();
						while (rs3_12.next()) {
							String s612 = rs3_12.getString("Zone");
							userlistal2.add(s612);
						
					}
				
				String sql3 = " select * from xx_designation_mapping where Designation_Id="
						+ desig;
				ps3_1 = conn.prepareStatement(sql3);
				rs3_1 = ps3_1.executeQuery();
				while (rs3_1.next()) {
					s6 = rs3_1.getString("Designation_Name");

				}

				zoneid = rs.getInt("Zone_ID");
				String zonetest = "select * from xx_zones_master where Zone_Id='"
						+ zoneid + "'";
				PreparedStatement zone11 = conn.prepareStatement(zonetest);
				ResultSet rszone11 = zone11.executeQuery();
				while (rszone11.next()) {
					zone_name = rszone11.getString("Zone_Name");

				}
				divisionid = rs.getInt("Division_ID");

				String division = "select * from xx_divisions_master where division_id='"
						+ divisionid + "'";

				PreparedStatement div11 = conn.prepareStatement(division);
				ResultSet rsdiv = div11.executeQuery();
				while (rsdiv.next()) {
					division_name = rsdiv.getString("division_name");

				}

				
				String sql1 = "select * from xx_departments_master where Department_id='"
						+ dep_id + "'";

				ps1_1 = conn.prepareStatement(sql1);
				rs1_1 = ps1_1.executeQuery();
				while (rs1_1.next()) {
					s4 = rs1_1.getString("Department_Name");

				}
				
				if (piu1 != 0) {
					String sql2 = " select * from xx_piu_master where PIU_Id="
							+ piu1;
					
					ps2 = conn.prepareStatement(sql2);
					rs2 = ps2.executeQuery();
					while (rs2.next()) {
						s5 = rs2.getString("PIU_Name");

					}
					
				} else {

				}
			
			}
			String packdisplay2 = "select pks.ct as packcount from xx_zones_master z left join (select e.zone_id, count(e.zone_id) as ct from xx_user_master a, xx_piu_master b, xx_projectattributes_master c, xx_packages_project d, xx_project_division_map e where a.PIU_ID = b.PIU_Id and b.PIU_Name=c.PIU_of_RVNL and c.Project_ID = d.project_id and d.package_id = e.package_id and a.user_id=" + userid + " group by e.zone_id) pks on z.zone_id=pks.zone_id order by z.Zone_Id";
			 ps2_1 = conn.prepareStatement(packdisplay2);
			rs2_1 = ps2_1.executeQuery();
			while (rs2_1.next()) {
				String pack12 = rs2_1.getString("packcount");
				packagelistal.add(pack12);
			
		}
		} catch (Exception e) {
			e.printStackTrace();
		} 
	
      out.write("\r\n");
      out.write("\t\r\n");
      out.write(" <div class=\"absolute\" style=\"font-weight:bold\" ><h8>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Modify Local Admin] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h8>\r\n");
      out.write("\r\n");
      out.write("<h8><font style=\"color:red; font-weight:normal\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Welcome&nbsp;</font><font style=\"color:#3333cc; font-weight:normal\">:&nbsp;");
      out.print((String)session.getAttribute("user_name") );
      out.write("&nbsp;&nbsp;&nbsp;</font></h8><br>\r\n");
      out.write("</div> <br> \r\n");
      out.write("\t\r\n");
      out.write("\t<div class=\"container\" style=\"margin-top: 40px;\">\r\n");
      out.write("\t\t<form id=\"loginForm11\" name=\"loginForm11\" method=\"post\">\r\n");
      out.write("\t\t\t<INPUT TYPE=\"HIDDEN\" NAME=\"Depatment\"> \r\n");
      out.write("\t\t\t<INPUT TYPE=\"HIDDEN\" NAME=\"cbResults\">\r\n");
      out.write("\t\t\t\t <INPUT TYPE=\"HIDDEN\" NAME=\"Project_stage\">\r\n");
      out.write("\t\t\t\t <INPUT TYPE=\"HIDDEN\" NAME=\"email_old\">\r\n");
      out.write("\t\t\t<INPUT TYPE=\"HIDDEN\" NAME=\"no_old\">\r\n");
      out.write("\t\r\n");
      out.write("\t\t\t");
      //  c:if
      org.apache.taglibs.standard.tag.rt.core.IfTag _jspx_th_c_005fif_005f0 = (org.apache.taglibs.standard.tag.rt.core.IfTag) _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.IfTag.class);
      boolean _jspx_th_c_005fif_005f0_reused = false;
      try {
        _jspx_th_c_005fif_005f0.setPageContext(_jspx_page_context);
        _jspx_th_c_005fif_005f0.setParent(null);
        // /Admin/modifylocaluser.jsp(547,3) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
        _jspx_th_c_005fif_005f0.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${param.Project_stage == null}", java.lang.Boolean.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false)).booleanValue());
        int _jspx_eval_c_005fif_005f0 = _jspx_th_c_005fif_005f0.doStartTag();
        if (_jspx_eval_c_005fif_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
          do {
            out.write("\r\n");
            out.write("\t\t\t\t<div id=\"modify\"\r\n");
            out.write("\t\t\t\t\tstyle=\"background: aliceblue none repeat scroll 0% 0%; width: 40%;\">\r\n");
            out.write("\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PIU :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <select name=PIU_Id\r\n");
            out.write("\t\t\t\t\t\tid=\"PIU_Id\"\r\n");
            out.write("\t\t\t\t\t\tstyle=\"width: 205px; margin-top: 23px; background-color: #d3d3d3;\"\r\n");
            out.write("\t\t\t\t\t\tonchange=\"javascript:localadmnpiuchange(this.value);\" disabled>\r\n");
            out.write("\t\t\t\t\t\t<option value=");
            out.print(s5);
            out.write('>');
            out.print(s5);
            out.write("</option>\r\n");
            out.write("\t\t\t\t\t\t");

							try {

									

									String sql13 = "select * from xx_piu_master order by PIU_Name";
									PreparedStatement ps13 = conn.prepareStatement(sql13);
									ResultSet rs13 = ps13.executeQuery();

									while (rs13.next()) {
										String dname = rs13.getString("PIU_Name");
						
            out.write("\r\n");
            out.write("\t\t\t\t\t\t<option value=\"");
            out.print(dname);
            out.write('"');
            out.write('>');
            out.print(dname);
            out.write("</option>\r\n");
            out.write("\t\t\t\t\t\t");

							}
						
            out.write("\r\n");
            out.write("\r\n");
            out.write("\t\t\t\t\t</select> <br />\r\n");
            out.write("\t\t\t\t\t<div id=\"piu111\" style=\"margin: 0px 0px 0px 48px;\"></div>\r\n");
            out.write("\r\n");
            out.write("\r\n");
            out.write("\t\t\t\t\t<br />\r\n");
            out.write("\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;User\r\n");
            out.write("\t\t\t\t\tId:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n");
            out.write("\t\t\t\t\t<input name=\"User_name\" id=\"User_name1\" type=\"text\"\r\n");
            out.write("\t\t\t\t\t\tclass=\"textfield\" onkeyup=\"loadXMLDoc('User_name1','err1')\"\r\n");
            out.write("\t\t\t\t\t\tvalue=\"");
            out.print(s1);
            out.write("\" > <span\r\n");
            out.write("\t\t\t\t\t\tid=\"err1\"> </span> <br>\r\n");
            out.write("\t\t\t\t\t\t<input type=\"hidden\" name=\"test\" id=\"test\" value=\"");
            out.print(s1 );
            out.write("\" /> <font color=\"#99CC00\">\r\n");
            out.write("\t\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; User ID\r\n");
            out.write("\t\t\t\t\t\tshould be complete Designation along with place of <br>\r\n");
            out.write("\t\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posting\r\n");
            out.write("\t\t\t\t\t\t(For example- <b>SrDEN/E/WAT</b>)\r\n");
            out.write("\t\t\t\t\t</font><br> <br>\r\n");
            out.write("\r\n");
            out.write("\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Officer\r\n");
            out.write("\t\t\t\t\tName :&nbsp;&nbsp; <input name=\"Officer_Name\" id=\"Officer_Name\"\r\n");
            out.write("\t\t\t\t\t\ttype=\"text\" class=\"textfield\" value=\"");
            out.print(s2);
            out.write("\" width=\"200\"\r\n");
            out.write("\t\t\t\t\t\tstyle=\"width: 205px\"> <br> <br>\r\n");
            out.write("\r\n");
            out.write("\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Email\r\n");
            out.write("\t\t\t\t\tId :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input\r\n");
            out.write("\t\t\t\t\t\tname=\"Email\" id=\"Email\" type=\"text\" class=\"textfield\"\r\n");
            out.write("\t\t\t\t\t\tonkeyup=\"checkemail1()\" value=\"");
            out.print(s3);
            out.write("\" width=\"200\"\r\n");
            out.write("\t\t\t\t\t\tstyle=\"width: 205px\">\r\n");
            out.write("\t\t\t\t\t<div id=\"error4\"  style=\"margin:0px 0px 0px 158px;\"></div>\r\n");
            out.write("\t\t\t\t\t<br> \r\n");
            out.write("\r\n");
            out.write("\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Contact\r\n");
            out.write("\t\t\t\t\tNo:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input name=\"Phone_Number\"\r\n");
            out.write("\t\t\t\t\t\tid=\"Phone_Number\" type=\"text\" class=\"textfield\"\r\n");
            out.write("\t\t\t\t\t\tonkeyup=\"ValidateNo1()\" maxlength=\"10\" value=\"");
            out.print(no);
            out.write("\" width=\"200\"\r\n");
            out.write("\t\t\t\t\t\tstyle=\"width: 205px\">\r\n");
            out.write("\t\t\t\t\t<div id=\"error5\" style=\"margin:10px 0px 0px 170px;\"></div>\r\n");
            out.write("\t\t\t\t\r\n");
            out.write("\r\n");
            out.write("\t\t\t\t\t<!--  <div style='display:;' id='business_RVNL'> -->\r\n");
            out.write("\t\t\t\t\t&nbsp;\r\n");
            out.write("\r\n");
            out.write("\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Department:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n");
            out.write("\r\n");
            out.write("\t\t\t\t\t<select name=departme id=\"departme\" style=\"width: 205px\">\r\n");
            out.write("\t\t\t\t\t\t<option value=\"");
            out.print(s4);
            out.write('"');
            out.write('>');
            out.print(s4);
            out.write("</option>\r\n");
            out.write("\t\t\t\t\t\t");

							String sql14 = "select Department_Name from xx_departments_master where type ='RVNL'and Department_Name!='"
											+ s4 + "'  order by department_name";
									PreparedStatement ps14 = conn.prepareStatement(sql14);
									ResultSet rs14 = ps14.executeQuery();

									//ResultSet depRS = depPS.executeQuery();
									//String dname1 =null;
									while (rs14.next()) {
										String dname1 = rs14.getString("Department_Name");
						
            out.write("\r\n");
            out.write("\t\t\t\t\t\t<option value=\"");
            out.print(dname1);
            out.write('"');
            out.write('>');
            out.print(dname1);
            out.write("</option>\r\n");
            out.write("\r\n");
            out.write("\t\t\t\t\t\t");

							}
						
            out.write("\r\n");
            out.write("\t\t\t\t\t</select> <br /> <br />\r\n");
            out.write("\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Zone:<br>\r\n");
            out.write("\t\t\t\t<table class=\"table table-bordered\" style=\"margin-left:100px; width:75%;\">\r\n");
            out.write("\t\t\t\t\t<tr><th style=\"padding-left: 50px\">Zone Name</th><th style=\"margin-left: 50px\">Package created</th></tr>\r\n");
            out.write("\t\t\t\t\t\r\n");
            out.write("\t\t\t\t\t");

					Iterator<String> divitr = userlistal111.iterator();
				Iterator<String> packitr = packagelistal.iterator();
							String username11 = null;
							String packname11 = null;
							while (divitr.hasNext()) {
								
            out.write("\r\n");
            out.write("\t\t\t\t\t\t\t\t<tr><td>\r\n");
            out.write("\t\t\t\t");
	
								username11 = divitr.next();
								packname11=packitr.next();
								if (packname11!=null) {
									} else {packname11="-";}
								if (userlistal1.contains(username11)) {
     								if (userlistal2.contains(username11)) {	
					
            out.write("\r\n");
            out.write("\t\t\t\t\t<div>\r\n");
            out.write("\t\t\t\t\t\t<input type='checkbox' name='Zone_id' id='Zone_id'\r\n");
            out.write("\t\t\t\t\t\t\tstyle=\"margin-left: 50px;\" value=\"");
            out.print(username11);
            out.write("\" checked disabled>\r\n");
            out.write("\t\t\t\t\t\t");
            out.print(username11);
            out.write("\r\n");
            out.write("\t\t\t\t\t</div>\r\n");
            out.write("\t\t\t\t\t\t<div>\r\n");
            out.write("\t\t\t\t\t\t<input type='hidden' name='Zone_id' id='Zone_id'\r\n");
            out.write("\t\t\t\t\t\t\tstyle=\"margin-left: 50px;\" value=\"");
            out.print(username11);
            out.write("\" checked >\r\n");
            out.write("\t\t\t\t\t\t</div>\r\n");
            out.write("\t\t\t\t\t");

						}
							else {
					
            out.write("\r\n");
            out.write("\t\t\t\t\t\t<div>\r\n");
            out.write("\t\t\t\t\t\t\t<input type='checkbox' name='Zone_id' id='Zone_id'\r\n");
            out.write("\t\t\t\t\t\t\tstyle=\"margin-left: 50px;\" value=\"");
            out.print(username11);
            out.write("\" checked>\r\n");
            out.write("\t\t\t\t\t\t\t");
            out.print(username11);
            out.write("\r\n");
            out.write("\t\t\t\t\t\t\t</div>\r\n");
            out.write("\t\t\t\t\t");

						}
     							}	
     							else {
					                                         
                		
            out.write("\r\n");
            out.write("\t\t\t\t\t<input type='checkbox' name='Zone_id' id='Zone_id'\r\n");
            out.write("\t\t\t\t\t\tstyle=\"margin-left: 50px\" value=\"");
            out.print(username11);
            out.write("\" >\r\n");
            out.write("\t\t\t\t\t");
            out.print(username11);
            out.write("\r\n");
            out.write("\t\t\t\t\t");

						
									}
     							
            out.write("\r\n");
            out.write("     \t\t\t\t</td><td>\r\n");
            out.write("     \t\t\t\t\t<div type='text' name='packs' id='packs'\r\n");
            out.write("\t\t\t\t\t\tstyle=\"margin-left: 50px; //margin-top:20px;\" value=\"");
            out.print(packname11);
            out.write("\" >\r\n");
            out.write("\t\t\t\t\t");
            out.print(packname11);
            out.write("</div>\r\n");
            out.write("\t\t\t\t\t</td></tr>\r\n");
            out.write("\t\t\t\t\t");

								}
							
            out.write("\r\n");
            out.write("\t\t\t\t\t\t\t</table><br>\r\n");
            out.write("\t\t\t\t\t\t\t<div style=\"margin-left:20px; color:blue;\">Note:- In case a zone is de-checked then project package details connected to this zone will be deleted.</div>    \r\n");
            out.write("\t\t\t\t\t\t\t");

								} catch (Exception e) {
								e.printStackTrace();
							}
						finally{
							conn.close();
						}
					
            out.write("\r\n");
            out.write("\t\t\t\t\t<br /> <br />\r\n");
            out.write("\r\n");
            out.write("\r\n");
            out.write("\t\t\t\t</div>\r\n");
            out.write("\t\t\t\t<table>\r\n");
            out.write("\t\t\t\t\t<tr>\r\n");
            out.write("\t\t\t\t\t\t<td> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n");
            out.write("\t\t\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n");
            out.write("\r\n");
            out.write("\t\t\t\t\t\t\t<INPUT TYPE=\"HIDDEN\" id=\"demo\">\r\n");
            out.write("\t\t\t\t\t\t\t<center><button type=\"button\" id=\"btnclick\" class=\"btn btn-primary\" STYLE=\"MARGIN-LEFT:100PX;\"\r\n");
            out.write("\t\t\t\t\t\t\t\tonclick=\"modifylocaluser();\">Submit</button>\r\n");
            out.write("\r\n");
            out.write("\r\n");
            out.write("\t\t\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type=\"reset\"\r\n");
            out.write("\t\t\t\t\t\t\tclass=\"btn btn-primary\" value=\"Cancel\" onclick=\"refreshAndClose()\" /></center></td>\r\n");
            out.write("\r\n");
            out.write("\t\t\t\t\t</tr>\r\n");
            out.write("\r\n");
            out.write("\t\t\t\t</table>\r\n");
            out.write("\t\t\t\t <br> <br>\r\n");
            out.write("\t\t<div id=\"dialogid\" style=\"display: none\"\r\n");
            out.write("\t\t\t\t\t\t\t\talign=\"center\">\r\n");
            out.write("\t\t\t\t\t\t\t\t<br> Please Fill All Data<br>\r\n");
            out.write("\t\t\t\t\t\t\t\t<br>\r\n");
            out.write("\t\t\t\t\t\t\t\t<button id=\"cancle\" class=\"btn btn-primary\"\r\n");
            out.write("\t\t\t\t\t\t\t\t\tonclick=\"jQuery.noConflict();$('#dialogid').dialog('close');\">cancel</button>\r\n");
            out.write("\t\t\t\t\t\t\t</div>\r\n");
            out.write("\t\t<div id=\"dialogid24\" style=\"display: none\"\r\n");
            out.write("\t\t\t\t\t\t\t\talign=\"center\">\r\n");
            out.write("\t\t\t\t\t\t\t\t<br> Duplicate/incorrect entry.........<br>\r\n");
            out.write("\t\t\t\t\t\t\t\t<br>\r\n");
            out.write("\t\t\t\t\t\t\t\t<button id=\"cancle\" class=\"btn btn-primary\"\r\n");
            out.write("\t\t\t\t\t\t\t\t\tonclick=\"jQuery.noConflict();$('#dialogid24').dialog('close');\">cancel</button>\r\n");
            out.write("\t\t\t\t\t\t\t</div>\r\n");
            out.write("\t\r\n");
            out.write("\t\t\t\t\t\t\t<br><br>\r\n");
            out.write("\t\t\t");
            int evalDoAfterBody = _jspx_th_c_005fif_005f0.doAfterBody();
            if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
              break;
          } while (true);
        }
        if (_jspx_th_c_005fif_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
          return;
        }
        _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.reuse(_jspx_th_c_005fif_005f0);
        _jspx_th_c_005fif_005f0_reused = true;
      } finally {
        org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fif_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fif_005f0_reused);
      }
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\t\t</form>\r\n");
      out.write("\t\t\r\n");
      out.write("\t\t\t\t\r\n");
      //  c:if
      org.apache.taglibs.standard.tag.rt.core.IfTag _jspx_th_c_005fif_005f1 = (org.apache.taglibs.standard.tag.rt.core.IfTag) _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.IfTag.class);
      boolean _jspx_th_c_005fif_005f1_reused = false;
      try {
        _jspx_th_c_005fif_005f1.setPageContext(_jspx_page_context);
        _jspx_th_c_005fif_005f1.setParent(null);
        // /Admin/modifylocaluser.jsp(747,0) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
        _jspx_th_c_005fif_005f1.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${param.Project_stage != null}", java.lang.Boolean.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false)).booleanValue());
        int _jspx_eval_c_005fif_005f1 = _jspx_th_c_005fif_005f1.doStartTag();
        if (_jspx_eval_c_005fif_005f1 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
          do {
            out.write("\r\n");
            out.write("\t\t");
			
		if (request.getParameter("Project_stage") != null) {
			String prof_alert2=(String)session.getAttribute("Profile_Alert");
			int userid11=0;
			String str=request.getParameter("Project_stage");
		    if(str.equalsIgnoreCase("fourth")){	
			String username11 = request.getParameter("User_name");
			String test1 = request.getParameter("test");
			String officers = request.getParameter("Officer_Name");
			String emails =request.getParameter("Email");
			String phones =request.getParameter("Phone_Number");
			String departme =request.getParameter("departme");
			String zoneCheck[] = request.getParameterValues("Zone_id");			
			String zones =request.getParameter("Zone_id");
			String zonename =request.getParameter("Zone_Name");
			String userid1 = request.getParameter("User_Id");
			String zoneid1 = request.getParameter("Zone_id");
			String PIU_Id = request.getParameter("PIU_Id");
			String RVNL = request.getParameter("LocalUser");
			String email_old = request.getParameter("email_old");
			String no_old = request.getParameter("no_old");
		
			String zones_assigned="";
			
			try {
				PreparedStatement ps5 =null,ps6=null,ps7=null,ps8=null ,ps9=null;ResultSet rs5=null, rs6=null,rs7=null,rs8=null,rs9=null;
				java.util.ArrayList<String> zonal15 = new java.util.ArrayList<String>();
				java.util.ArrayList<String> zonal3 = new java.util.ArrayList<String>();
				java.util.ArrayList<String> packal3 = new java.util.ArrayList<String>();
				
				conn = ds.getConnection();
				String sql8 = "select Department_Id from xx_departments_master where Department_Name ='"+departme+"'";
				ps8 = conn.prepareStatement(sql8);
				ResultSet rs81 = ps8.executeQuery();
				String departme_id =null;
				while (rs81.next()) {
					departme_id = rs81.getString("Department_Id");
					
				}
				
			
				
            out.write("\r\n");
            out.write("\t\t\t\t");
            //  sql:update
            org.apache.taglibs.standard.tag.rt.sql.UpdateTag _jspx_th_sql_005fupdate_005f0 = (org.apache.taglibs.standard.tag.rt.sql.UpdateTag) _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource.get(org.apache.taglibs.standard.tag.rt.sql.UpdateTag.class);
            boolean _jspx_th_sql_005fupdate_005f0_reused = false;
            try {
              _jspx_th_sql_005fupdate_005f0.setPageContext(_jspx_page_context);
              _jspx_th_sql_005fupdate_005f0.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fif_005f1);
              // /Admin/modifylocaluser.jsp(790,4) name = dataSource type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_sql_005fupdate_005f0.setDataSource("jdbc/MySQLDB");
              // /Admin/modifylocaluser.jsp(790,4) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_sql_005fupdate_005f0.setVar("rs");
              int[] _jspx_push_body_count_sql_005fupdate_005f0 = new int[] { 0 };
              try {
                int _jspx_eval_sql_005fupdate_005f0 = _jspx_th_sql_005fupdate_005f0.doStartTag();
                if (_jspx_eval_sql_005fupdate_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
                  if (_jspx_eval_sql_005fupdate_005f0 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                    _jspx_push_body_count_sql_005fupdate_005f0[0]++;
                    out = org.apache.jasper.runtime.JspRuntimeLibrary.startBufferedBody(_jspx_page_context, _jspx_th_sql_005fupdate_005f0);
                  }
                  do {
                    out.write("\r\n");
                    out.write("\t\t\t\t   UPDATE xx_user_master SET User_Name='");
                    out.print(username11 );
                    out.write("',Officer_Name ='");
                    out.print(officers );
                    out.write("',Email_Id='");
                    out.print(emails );
                    out.write("',Contact_No='");
                    out.print(phones );
                    out.write("',Department_id='");
                    out.print(departme_id );
                    out.write("', Date_created=now() where User_name='");
                    out.print(test1);
                    out.write("'                                 \r\n");
                    out.write("\t\t\t\t");
                    int evalDoAfterBody = _jspx_th_sql_005fupdate_005f0.doAfterBody();
                    if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
                      break;
                  } while (true);
                  if (_jspx_eval_sql_005fupdate_005f0 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                    out = _jspx_page_context.popBody();
                    _jspx_push_body_count_sql_005fupdate_005f0[0]--;
                  }
                }
                if (_jspx_th_sql_005fupdate_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
                  return;
                }
              } catch (java.lang.Throwable _jspx_exception) {
                while (_jspx_push_body_count_sql_005fupdate_005f0[0]-- > 0)
                  out = _jspx_page_context.popBody();
                _jspx_th_sql_005fupdate_005f0.doCatch(_jspx_exception);
              } finally {
                _jspx_th_sql_005fupdate_005f0.doFinally();
              }
              _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource.reuse(_jspx_th_sql_005fupdate_005f0);
              _jspx_th_sql_005fupdate_005f0_reused = true;
            } finally {
              org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_sql_005fupdate_005f0, _jsp_getInstanceManager(), _jspx_th_sql_005fupdate_005f0_reused);
            }
            out.write("\r\n");
            out.write("\t\t\t\t");
		
				
				String usersql = "select User_ID from xx_user_master where User_name='"+username11+"'";
				
				ps9 = conn.prepareStatement(usersql);
				rs9 = ps9.executeQuery();
				while(rs9.next()){
				 userid11=rs9.getInt("User_ID");
				}
				
            out.write("\r\n");
            out.write("\t\t\t\t");
            //  sql:update
            org.apache.taglibs.standard.tag.rt.sql.UpdateTag _jspx_th_sql_005fupdate_005f1 = (org.apache.taglibs.standard.tag.rt.sql.UpdateTag) _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource.get(org.apache.taglibs.standard.tag.rt.sql.UpdateTag.class);
            boolean _jspx_th_sql_005fupdate_005f1_reused = false;
            try {
              _jspx_th_sql_005fupdate_005f1.setPageContext(_jspx_page_context);
              _jspx_th_sql_005fupdate_005f1.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fif_005f1);
              // /Admin/modifylocaluser.jsp(803,4) name = dataSource type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_sql_005fupdate_005f1.setDataSource("jdbc/MySQLDB");
              // /Admin/modifylocaluser.jsp(803,4) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_sql_005fupdate_005f1.setVar("rs");
              int[] _jspx_push_body_count_sql_005fupdate_005f1 = new int[] { 0 };
              try {
                int _jspx_eval_sql_005fupdate_005f1 = _jspx_th_sql_005fupdate_005f1.doStartTag();
                if (_jspx_eval_sql_005fupdate_005f1 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
                  if (_jspx_eval_sql_005fupdate_005f1 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                    _jspx_push_body_count_sql_005fupdate_005f1[0]++;
                    out = org.apache.jasper.runtime.JspRuntimeLibrary.startBufferedBody(_jspx_page_context, _jspx_th_sql_005fupdate_005f1);
                  }
                  do {
                    out.write("\r\n");
                    out.write("\t\t\t\t  DELETE from xx_user_zone_mapping where User_Id='");
                    out.print(userid11);
                    out.write("'\r\n");
                    out.write("\t\t\t\t");
                    int evalDoAfterBody = _jspx_th_sql_005fupdate_005f1.doAfterBody();
                    if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
                      break;
                  } while (true);
                  if (_jspx_eval_sql_005fupdate_005f1 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                    out = _jspx_page_context.popBody();
                    _jspx_push_body_count_sql_005fupdate_005f1[0]--;
                  }
                }
                if (_jspx_th_sql_005fupdate_005f1.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
                  return;
                }
              } catch (java.lang.Throwable _jspx_exception) {
                while (_jspx_push_body_count_sql_005fupdate_005f1[0]-- > 0)
                  out = _jspx_page_context.popBody();
                _jspx_th_sql_005fupdate_005f1.doCatch(_jspx_exception);
              } finally {
                _jspx_th_sql_005fupdate_005f1.doFinally();
              }
              _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource.reuse(_jspx_th_sql_005fupdate_005f1);
              _jspx_th_sql_005fupdate_005f1_reused = true;
            } finally {
              org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_sql_005fupdate_005f1, _jsp_getInstanceManager(), _jspx_th_sql_005fupdate_005f1_reused);
            }
            out.write("\r\n");
            out.write("\t\t\t\t");

				String sql9 = "select e.zone_id, e.package_id from xx_user_master a, xx_piu_master b, xx_projectattributes_master c, xx_packages_project d, (select package_Id, zone_id from xx_project_division_map group by package_id, zone_id) e where a.PIU_ID = b.PIU_Id and b.PIU_Name=c.PIU_of_RVNL and c.Project_ID = d.project_id and d.package_id = e.package_id and a.user_id="+userid11;
				PreparedStatement ps19 = conn.prepareStatement(sql9);
				ResultSet rs82 = ps19.executeQuery();
				String pack22 =null;
				String zone22 =null;
				//System.out.println("array="+pack22+"zone"+zone22+userid11);
				while (rs82.next()) {
					zone22 = rs82.getString(1);
					pack22 = rs82.getString(2);
					//System.out.println("array="+pack22+"zone"+zone22);
					packal3.add(pack22);
					zonal3.add(zone22);
				}
				
			for (int k = 0; k < zoneCheck.length; k++) {
	 				  
	 			 Statement stmt1 = conn.createStatement();
					ResultSet rs21 = stmt1.executeQuery("select Zone_Id from xx_zones_master where Zone_Name = '"+zoneCheck[k]+"' order by Zone_Name ");
					
					if (zones_assigned.equalsIgnoreCase("")) {
						zones_assigned=zoneCheck[k];
					} else { zones_assigned=zones_assigned+","+zoneCheck[k];}

					String zone1 = null;

					while (rs21.next()) {
						zone1 = rs21.getString(1);  
						zonal15.add(zone1);				
					}
					
					
            out.write("\r\n");
            out.write("\t\t\t\t\t");
            //  sql:update
            org.apache.taglibs.standard.tag.rt.sql.UpdateTag _jspx_th_sql_005fupdate_005f2 = (org.apache.taglibs.standard.tag.rt.sql.UpdateTag) _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource.get(org.apache.taglibs.standard.tag.rt.sql.UpdateTag.class);
            boolean _jspx_th_sql_005fupdate_005f2_reused = false;
            try {
              _jspx_th_sql_005fupdate_005f2.setPageContext(_jspx_page_context);
              _jspx_th_sql_005fupdate_005f2.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fif_005f1);
              // /Admin/modifylocaluser.jsp(838,5) name = dataSource type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_sql_005fupdate_005f2.setDataSource("jdbc/MySQLDB");
              // /Admin/modifylocaluser.jsp(838,5) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_sql_005fupdate_005f2.setVar("rs");
              int[] _jspx_push_body_count_sql_005fupdate_005f2 = new int[] { 0 };
              try {
                int _jspx_eval_sql_005fupdate_005f2 = _jspx_th_sql_005fupdate_005f2.doStartTag();
                if (_jspx_eval_sql_005fupdate_005f2 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
                  if (_jspx_eval_sql_005fupdate_005f2 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                    _jspx_push_body_count_sql_005fupdate_005f2[0]++;
                    out = org.apache.jasper.runtime.JspRuntimeLibrary.startBufferedBody(_jspx_page_context, _jspx_th_sql_005fupdate_005f2);
                  }
                  do {
                    out.write("\r\n");
                    out.write("\t\t\t\t\t   \r\n");
                    out.write("\t\t\t\t\t   Insert into xx_user_zone_mapping(User_Id,Zone_ID,Piu_Id) VALUES(");
                    out.print(userid11);
                    out.write(',');
                    out.print(zone1);
                    out.write(',');
                    out.print(piu1 );
                    out.write(")\r\n");
                    out.write("\t\t\t\t\t");
                    int evalDoAfterBody = _jspx_th_sql_005fupdate_005f2.doAfterBody();
                    if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
                      break;
                  } while (true);
                  if (_jspx_eval_sql_005fupdate_005f2 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                    out = _jspx_page_context.popBody();
                    _jspx_push_body_count_sql_005fupdate_005f2[0]--;
                  }
                }
                if (_jspx_th_sql_005fupdate_005f2.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
                  return;
                }
              } catch (java.lang.Throwable _jspx_exception) {
                while (_jspx_push_body_count_sql_005fupdate_005f2[0]-- > 0)
                  out = _jspx_page_context.popBody();
                _jspx_th_sql_005fupdate_005f2.doCatch(_jspx_exception);
              } finally {
                _jspx_th_sql_005fupdate_005f2.doFinally();
              }
              _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource.reuse(_jspx_th_sql_005fupdate_005f2);
              _jspx_th_sql_005fupdate_005f2_reused = true;
            } finally {
              org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_sql_005fupdate_005f2, _jsp_getInstanceManager(), _jspx_th_sql_005fupdate_005f2_reused);
            }
            out.write("\r\n");
            out.write("\t\t\t\t\t\r\n");
            out.write("\t\t\t\t\t");
	
			 }
			 Iterator<String> packitr3=packal3.iterator();
			 Iterator<String> zoneitr3=zonal3.iterator();
				String zone3=null;
				String pack3=null;
			while(zoneitr3.hasNext()){
				zone3=zoneitr3.next();	
				pack3=packitr3.next();
			if(zonal15.contains(zone3)){ } else {
				
			//System.out.println("delete="+pack3+"zone"+zone3);
				
            out.write("\r\n");
            out.write("\t\t\t\t");
            //  sql:update
            org.apache.taglibs.standard.tag.rt.sql.UpdateTag _jspx_th_sql_005fupdate_005f3 = (org.apache.taglibs.standard.tag.rt.sql.UpdateTag) _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource.get(org.apache.taglibs.standard.tag.rt.sql.UpdateTag.class);
            boolean _jspx_th_sql_005fupdate_005f3_reused = false;
            try {
              _jspx_th_sql_005fupdate_005f3.setPageContext(_jspx_page_context);
              _jspx_th_sql_005fupdate_005f3.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fif_005f1);
              // /Admin/modifylocaluser.jsp(856,4) name = dataSource type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_sql_005fupdate_005f3.setDataSource("jdbc/MySQLDB");
              // /Admin/modifylocaluser.jsp(856,4) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_sql_005fupdate_005f3.setVar("rs");
              int[] _jspx_push_body_count_sql_005fupdate_005f3 = new int[] { 0 };
              try {
                int _jspx_eval_sql_005fupdate_005f3 = _jspx_th_sql_005fupdate_005f3.doStartTag();
                if (_jspx_eval_sql_005fupdate_005f3 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
                  if (_jspx_eval_sql_005fupdate_005f3 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                    _jspx_push_body_count_sql_005fupdate_005f3[0]++;
                    out = org.apache.jasper.runtime.JspRuntimeLibrary.startBufferedBody(_jspx_page_context, _jspx_th_sql_005fupdate_005f3);
                  }
                  do {
                    out.write("\r\n");
                    out.write("\t\t\t\t   \r\n");
                    out.write("\t\t\t\t   Delete from xx_project_division_map where package_id=");
                    out.print(pack3 );
                    out.write(" and zone_id=");
                    out.print(zone3 );
                    out.write("\r\n");
                    out.write("\t\t\t\t");
                    int evalDoAfterBody = _jspx_th_sql_005fupdate_005f3.doAfterBody();
                    if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
                      break;
                  } while (true);
                  if (_jspx_eval_sql_005fupdate_005f3 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                    out = _jspx_page_context.popBody();
                    _jspx_push_body_count_sql_005fupdate_005f3[0]--;
                  }
                }
                if (_jspx_th_sql_005fupdate_005f3.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
                  return;
                }
              } catch (java.lang.Throwable _jspx_exception) {
                while (_jspx_push_body_count_sql_005fupdate_005f3[0]-- > 0)
                  out = _jspx_page_context.popBody();
                _jspx_th_sql_005fupdate_005f3.doCatch(_jspx_exception);
              } finally {
                _jspx_th_sql_005fupdate_005f3.doFinally();
              }
              _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource.reuse(_jspx_th_sql_005fupdate_005f3);
              _jspx_th_sql_005fupdate_005f3_reused = true;
            } finally {
              org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_sql_005fupdate_005f3, _jsp_getInstanceManager(), _jspx_th_sql_005fupdate_005f3_reused);
            }
            out.write("\r\n");
            out.write("\t\t\t\t\r\n");
            out.write("\t\t\t\t");
	
			}
			}
		
	if (prof_alert2.equalsIgnoreCase("On")) {
				// Mail code starts from here
				//System.out.println("today:"+Date1+"approval date:"+date);	
				System.out.println("old email:"+email_old+" old no:"+no_old);	
						 String result, cc1, cc2, id1, no2;
						    // Get recipient's email-ID, message & subject-line from index.html page
						    StringBuffer url =    request.getRequestURL();
							if (!email_old.equalsIgnoreCase(emails)) {
								cc1=email_old;
								cc2="<br> New Email Id: "+emails+"<br> Old Email Id: "+email_old;
							} else { 
								cc1=""; cc2="";
							}
							if (!no_old.equalsIgnoreCase(phones)) {
								no2="<br> New Contact No: "+phones+"<br> Old Contact No: "+no_old;
							} else { 
								no2="";
							}
							if (!username11.equalsIgnoreCase(test1)) {
								id1="<br> Old Uder Id: "+test1;
							} else {id1="";}
									
							String pageName1 = url.substring(0, url.lastIndexOf("/"))+"/admn_login.jsp";
						    final String to = emails;
						    final String subject = "RVNL Document Portal - Change in User details";
						    final String messg = "<div style='font-family:Georgia; font-size:16px; text-align:justify; line-height:150%;'>To <BR> <b>"+username11.toUpperCase()+"</b> <br><br> Your portal login details have been modifed as under;"
						     +"<br><BR> New User Id:  "+username11+id1+cc2+no2+"<br> Zones Assigned: "+zones_assigned+"<br> Login webpage: <a href=\" "+ pageName1+"\">"+pageName1+"</a> <br><br><br><span style='color:brown; font-size:20px; font-style:italic;'<b> RVNL Document Portal</b></span><br><br><span style='color:gray;  font-size:10px; font-style:italic;'>Note: This is a system generated email. Don't reply to system email address i.e. indiarvnl@gmail.com.</span></div>";
						    						
						    // Sender's email ID and password needs to be mentioned
						    final String from = "indiarvnl@gmail.com";
						    final String pass = "vsam3WSCJAIw4cj7";
						    
						    final String cc = cc1;
						    // Defining the gmail host
						    String host = "smtp-relay.sendinblue.com";
						 
						    // Creating Properties object
						    Properties props = new Properties();
						 
						    // Defining properties
						   
						    props.put("mail.smtp.starttls.enable", "true");
						    props.put("mail.smtp.host", host);
						    props.put("mail.smtp.user", from);
						    props.put("mail.smtp.password", pass);
						    props.put("mail.smtp.port", "587");
						    props.put("mail.smtp.auth", "true");
						 
						    // Authorized the Session object.
						    Session mailSession = Session.getInstance(props, new javax.mail.Authenticator() {
						        @Override
						        protected PasswordAuthentication getPasswordAuthentication() {
						            return new PasswordAuthentication(from, pass);
						        }
						    });
						 
						    try {
						        // Create a default MimeMessage object.
						        MimeMessage message = new MimeMessage(mailSession);
						        // Set From: header field of the header.
						        message.setFrom(new InternetAddress(from));
						        // Set To: header field of the header.
						        message.addRecipient(Message.RecipientType.TO,
						                new InternetAddress(to));
						        message.setRecipients(Message.RecipientType.CC, cc);
						        // Set Subject: header field
						        message.setSubject(subject);
						        // Now set the actual message
						        message.setText(messg);
						        // Send message
						        Transport.send(message);
						        result = "Your mail sent successfully....";
						        System.out.println("Email sent successfully");
						    } catch (MessagingException mex) {
						        mex.printStackTrace();
						        result = "Error: unable to send mail....";
						    }
						 
						    // mail code ends here
						     //SMS code 

				try {
				//Construct data
				//contact number supervisor------contact_No_sup
				//contact number sender ------------- supcontact

				String usersms = "username=" + "indiarvnl@gmail.com";
				String hash = "&hash=" + "60b97ac840106a43c5a0e44fb778276d90330ece5e2da9ad534868c03137636d";
				//String apiKey = "apikey=" + "noVebn4XbP0-UFyeK1rRwkvCNdDw5ZXfVqrSNPndk2";
				String message = "&message=" + "Please check your email ("+emails+") for modified login details.\n\nRVNL Document Portal";
				String sender = "&sender=" + "RPDAMS";
				String numbers = "&numbers=" + ""+phones+","+no_old+"";

				//Send data
				HttpURLConnection connsms = (HttpURLConnection) new java.net.URL("http://api.textlocal.in/send in/?").openConnection();

				String data = usersms + hash + numbers + message + sender;
				//String data = apiKey + numbers + message + sender;
				connsms.setDoOutput(true);
				connsms.setRequestMethod("POST");
				connsms.setRequestProperty("Content-Length", Integer.toString(data.length()));
				connsms.getOutputStream().write(data.getBytes("UTF-8"));
				final BufferedReader rd = new BufferedReader(new InputStreamReader(connsms.getInputStream()));
				final StringBuffer stringBuffer = new StringBuffer();
				String line;
				while ((line = rd.readLine()) != null) {
				stringBuffer.append(line);
				}
				rd.close();
				System.out.println("Message sent successfully");
				//return stringBuffer.toString();
				} catch (Exception e) {
				System.out.println("Error SMS "+e);
				//return "Error "+e;
				}					   
				//sms code ends here
	}
	 		  
	 		  
            out.write("\r\n");
            out.write("\r\n");
            out.write("\r\n");
            out.write(" <div  style='vertical-align: baseline; padding: 10px; margin: 20px;'>\r\n");
            out.write("\t <div class=\"alert alert-success\" align=\"center\">\r\n");
            out.write("\t <strong>Success!</strong> local-Admin has been updated successfully.\r\n");
            out.write("\t <br>\r\n");
            out.write("\t <br>\r\n");
            out.write("\t <input class='btn btn-primary' value='OK'  onClick=\"refreshAndClose()\" type='button'/>\r\n");
            out.write("\t </div>\r\n");
            out.write("</div> <br> <br>\r\n");
            out.write("\r\n");
            out.write("\t \t\t  \r\n");

		//	conn.close();
		}catch(Exception e){
			e.printStackTrace();
		} finally {
		    try { conn.close(); } catch (Exception e) { /* ignored */ }
		}
			
		}
		} // end of if of project stage
				

            out.write("\r\n");
            out.write("\r\n");
            out.write("\t\t\t\t\r\n");
            out.write("\t\t\r\n");
            out.write("\t");
            int evalDoAfterBody = _jspx_th_c_005fif_005f1.doAfterBody();
            if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
              break;
          } while (true);
        }
        if (_jspx_th_c_005fif_005f1.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
          return;
        }
        _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.reuse(_jspx_th_c_005fif_005f1);
        _jspx_th_c_005fif_005f1_reused = true;
      } finally {
        org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fif_005f1, _jsp_getInstanceManager(), _jspx_th_c_005fif_005f1_reused);
      }
      out.write("\t\r\n");
      out.write("\t\t\r\n");
      out.write("\t</div>\r\n");
      out.write("\t");
      out.write("\r\n");
      out.write("<!DOCTYPE html>\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\">\r\n");
      out.write("<link rel=\"stylesheet\" href=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\">\r\n");
      out.write("<title>Insert title here</title>\r\n");
      out.write("<style>\r\n");
      out.write("@import url('http://fonts.googleapis.com/css?family=Open+Sans:400,700');\r\n");
      out.write("\r\n");
      out.write("footer{\r\n");
      out.write("\tposition: fixed;\r\n");
      out.write("\tmargin-top:150px;\r\n");
      out.write("\tbottom: 0;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("</style>\r\n");
      out.write("</head>\r\n");
      out.write("<body>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<!-- \r\n");
      out.write("<footer>\r\n");
      out.write("<div class=\"city\">\r\n");
      out.write("  <ul class=\" nav navbar-nav\">\r\n");
      out.write("  \r\n");
      out.write("    <li class=\"footerli\">Rail Vikas Nigam Limited.</li>\r\n");
      out.write("    </ul>\r\n");
      out.write("    <ul   class=\"nav navabar-nav\" style=\"float:right;\">\r\n");
      out.write("   <li class=\"footerli\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Design & Developed By<a href=\"http://www.awcsoftware.net\" style=\"text-decoration:none;\">AWC SOFTWARE PVT LTD</a></li>\r\n");
      out.write("    \r\n");
      out.write("  </ul>\r\n");
      out.write(" </div>\r\n");
      out.write("\r\n");
      out.write("</footer> -->\r\n");
      out.write("\r\n");
      out.write("<footer class=\"footer-basic-centered\">\r\n");
      out.write("\r\n");
      out.write("\t\t\t<p class=\"footer-company-motto\" style=\"float:left;\">Rail Vikas Nigam Limited</p>\r\n");
      out.write("\t\t\t<p class=\"footer-company-motto\" style=\"float:center; font-family:serif; font-size:14px; font-style:italic; margin-top:5px;\">Ver:2.30.pks</p>\r\n");
      out.write("\t\t\t<p class=\"footer-company-name\" style=\"float:right; margin-top:-20px;\"> Design & Developed By<a href=\"http://www.awcsoftware.net\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AWC SOFTWARE PVT LTD</a></p>\r\n");
      out.write("\r\n");
      out.write("\t\t</footer>\r\n");
      out.write("</body>");
      out.write("\r\n");
      out.write("\r\n");
      out.write("</body>\r\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
