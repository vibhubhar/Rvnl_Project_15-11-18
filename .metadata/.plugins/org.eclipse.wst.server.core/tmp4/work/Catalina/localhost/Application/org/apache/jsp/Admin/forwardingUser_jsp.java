/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.86
 * Generated at: 2018-07-20 05:30:45 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.Admin;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import java.net.HttpURLConnection;
import javax.servlet.*;
import javax.servlet.http.*;
import java.util.*;
import javax.naming.*;
import java.sql.*;
import javax.sql.*;
import javax.servlet.*;
import javax.servlet.http.*;
import javax.naming.*;
import java.sql.*;
import javax.sql.*;
import java.util.*;
import java.util.Date;
import java.text.SimpleDateFormat;

public final class forwardingUser_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(2);
    _jspx_dependants.put("/Admin/included/NewHeader1.jsp", Long.valueOf(1532003898981L));
    _jspx_dependants.put("/WEB-INF/sessionCheck1.jspf", Long.valueOf(1524567358000L));
  }

  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fif_0026_005ftest;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fredirect_0026_005furl;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fparam_0026_005fvalue_005fname_005fnobody;

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
    _005fjspx_005ftagPool_005fc_005fif_0026_005ftest = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fc_005fredirect_0026_005furl = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fc_005fparam_0026_005fvalue_005fname_005fnobody = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
  }

  public void _jspDestroy() {
    _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.release();
    _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource.release();
    _005fjspx_005ftagPool_005fc_005fredirect_0026_005furl.release();
    _005fjspx_005ftagPool_005fc_005fparam_0026_005fvalue_005fname_005fnobody.release();
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=ISO-8859-1");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

 
int timeout = session.getMaxInactiveInterval();
response.setHeader("Refresh", timeout + "; URL = admn_login.jsp");

      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<!DOCTYPE html>\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\" />\r\n");
      out.write("<meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\r\n");
      out.write("<link rel=\"stylesheet\" href=\"/Application/Admin/resources/bootstrap-3.3.7-dist/css1/bootstrap.css\"/>\r\n");
      out.write("<link rel=\"stylesheet\" href=\"/Application/Admin/resources/bootstrap-3.3.7-dist/css1/bootstrap-theme.css\"/> \r\n");
      out.write("<link rel=\"stylesheet\" href=\"/Application/Admin/resources/css/main.css\"/>\t\r\n");
      out.write("\t\t");

 String theme3 = (String) pageContext.getAttribute("myTheme", PageContext.SESSION_SCOPE);
		System.out.println("Theme="+theme3);
 
      out.write("\r\n");
      out.write("\t\t\r\n");
      out.write("<meta charset=\"ISO-8859-1\">\r\n");
      out.write("<title>PDAMS</title>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<style>\r\n");
      out.write(".white-marquee {\r\n");
      out.write("   font-family: arial, calibri, \"Times New Roman\", Times, serif;\r\n");
      out.write("\tfont-size: 16px;\r\n");
      out.write("\tcolor: white;// blue;//white;\r\n");
      out.write("\t//margin-left:50px;\r\n");
      out.write("\tfont-weight:bold;\r\n");
      out.write("\tpadding:5px;\r\n");
      out.write("\tpadding-bottom:5px;\r\n");
      out.write("}\r\n");
      out.write(".marquee_section {\r\n");
      out.write("\twidth: 73%;\r\n");
      out.write("\tfloat: right;\r\n");
      out.write("\tline-height: 64px;\r\n");
      out.write("\theight: 65px;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("</style>\r\n");
      out.write("\r\n");
      out.write("</head>\r\n");
      out.write("<body>   \r\n");

//String mailstatus=(String)session.getAttribute("MailStatus"); 
//String user = (String) session.getAttribute("user_name");
String user_code = (String) session.getAttribute("User_Code");
if (user_code!=null) {} else {user_code="0";}
 String mq=null,  mqLaunch=null, mqMaint=null, mqOther=null, mqRly=null, mqRVNL=null;					
// System.out.println("code="+user_code);	
  Connection conn7 = null;
     			PreparedStatement ps777=null;
     			ResultSet  rs777=null;
     						//Statement stmt7 = null;
     						try {
     							Context initCtx = new InitialContext();
     							Context envCtx = (Context) initCtx.lookup("java:comp/env");
     							DataSource ds = (DataSource) envCtx.lookup("jdbc/MySQLDB");

     							conn7 = ds.getConnection();
     							String sql35 = "select item, description from xx_maintenance";
     									
    								ps777 = conn7.prepareStatement(sql35);
    								rs777 = ps777.executeQuery();
    								while (rs777.next()) {
    									String item=rs777.getString(1);
    									 String desc=rs777.getString(2);
    									if (item.equalsIgnoreCase("marquee-launch")) {
    										mqLaunch=desc;
    									} else if (item.equalsIgnoreCase("marquee-maint")) {
    										mqMaint=desc;
    									} else if (item.equalsIgnoreCase("marquee-other")) {
    										mqOther=desc;
    									} else if (item.equalsIgnoreCase("marquee-Rly")) {
    										mqRly=desc;
    									} else if (item.equalsIgnoreCase("marquee-RVNL")) {
    										mqRVNL=desc;
    									} 
    								}
    								if (user_code.equalsIgnoreCase("2")) {
    									mq= mqLaunch+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+mqMaint+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+mqOther+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+mqRly;
    								} else if (user_code.equalsIgnoreCase("5")) {
    									mq= mqLaunch+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+mqMaint+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+mqOther+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+mqRVNL;
    								} else {
    								mq= mqLaunch+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+mqMaint+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+mqOther;
    								} 		 
    								//System.out.println("marquee="+mq);			
     						}catch(Exception e){
    							
    							e.printStackTrace();
    						} finally {
    						    try { rs777.close(); } catch (Exception e) { /* ignored */ }
    						    try { ps777.close(); } catch (Exception e) { /* ignored */ }
    						    try { conn7.close(); } catch (Exception e) { /* ignored */ }
    						}


      out.write("\r\n");
      out.write("  <input type=\"hidden\" id=\"menu1\" value='");
      out.print(session.getAttribute("user_name") );
      out.write("'> \r\n");
      out.write("  <!-- header -->\r\n");
      out.write("     \t   <div class=\"container-fluid top_bar\">\r\n");
      out.write("           <div class=\"row\">\r\n");
      out.write("           <div class=\"col-md-4 col-sm-4 col-xs-4\" >\r\n");
      out.write("           <img src=\"/Application/Admin/images/Rail_logo.png\" alt=\"\" class=\"img-responsive\"/>\r\n");
      out.write("           </div>\r\n");
      out.write("           <div class=\"col-md-4 col-sm-4 col-xs-4 top_middle_bar\">\r\n");
      out.write("           <h2 ><p class=\"text-white bg-dark\"><i>Project Documents Approval Monitoring System (PDAMS)</i></p></h2>\r\n");
      out.write("           </div>\r\n");
      out.write("           <div class=\"col-md-4 col-sm-4 col-xs-4 right_bar\" >\r\n");
      out.write("           <img src=\"/Application/Admin/images/RVNL_LOGO.jpg\" alt=\"\" class=\"img-responsive pull-right\"/>\r\n");
      out.write("           </div>\r\n");
      out.write(" \t\t   \r\n");
      out.write(" \t\t  \r\n");
      out.write("   \r\n");
      out.write(" \t\t \r\n");
      out.write("   \r\n");
      out.write("   </div>\r\n");
      out.write("   </div>\r\n");
      out.write("   <!-- end of header -->\r\n");
      out.write("\t   <div class=\"topmenu\" id=\"menu\">\r\n");
      out.write("\t  <div id=\"menu1\"  style=\"float:left;\"> \r\n");
      out.write("\t  \t\t<ul>\r\n");
      out.write("\t  \t\t\r\n");
      out.write("\t  \t\t<!-- <li><a href=\"user_index.jsp\">Add/Modify Docs</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"user_Project.jsp\">My Projects</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"Reportpiuinitiate.jsp\">My Reports</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"MoreInfo.jsp\">Returned Tasks</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"PullBack.jsp\">PullBack Doc</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"FinalApproval.jsp\">Docs under Approval</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"FinallyApprovedShow.jsp\">Approved Docs</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"ManualMail.jsp\">Reminders</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"User_List.jsp\">User List</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"changepasswordlocaladmin.jsp\">Change Password</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"helpmain.jsp\">Help</a></li>\r\n");
      out.write("\t   \t\t\t\t\t<li><a href=\"admn_logout.jsp\">Logout</a></li>  \r\n");
      out.write("\t   \t\t\t\t\t\t<li><a href=\"NewIndex.jsp\">Home</a></li> -->\r\n");
      out.write("\t   \t\t\t\t\t\r\n");
      out.write("\t   \t\t\t\t\t</ul>\t \r\n");
      out.write("\t   \t\t\t\t\t</div>  \t\r\n");
      out.write("\t   \t\t\t\t\t");

	   					if (!mq.equalsIgnoreCase("") && mq!=null) {       
	   					
      out.write("\t\t\t\t\r\n");
      out.write("\t   <div id=\"menu2\"  style=\"width:100%; float:right;\">     \t\t\t\t\t\r\n");
      out.write("\t   <marquee><span class=\"white-marquee\" id=\"white-marquee\" style=\"float:left;\">");
      out.print(mq );
      out.write("</span></marquee>  </div>\r\n");
      out.write("\t");

	}
	
      out.write("\t\r\n");
      out.write("\t</div> \r\n");
      out.write("\t<script type=\"text/javascript\" src=\"/Application/Admin/resources/bootstrap-3.3.7-dist/js/jquery-3.3.1.js\"></script> \r\n");
      out.write("   <script type=\"text/javascript\" src=\"/Application/Admin/resources/bootstrap-3.3.7-dist/js/bootstrap.js\"></script>  \t\t\t\t\t\r\n");
      out.write("</body>\r\n");
      out.write("</html>");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("//$( window ).unload(function() { window.opener.location.reload(true);\r\n");
      out.write("//});\r\n");
      out.write("$(document).ready(function(){ /*code here*/  \r\n");
      out.write("\twindow.opener.location.reload(true);\r\n");
      out.write("//$(function() {\r\n");
      out.write("\tvar pkdate1=document.getElementById(\"subdate9\").value;\r\n");
      out.write("      $('#Dateofsubmission3').datepicker({ dateFormat: 'dd/mm/yy',maxDate:'0', changeYear: true});\r\n");
      out.write("\t  $('#Dateofsubmission3').datepicker('option', 'minDate', new Date(pkdate1));\r\n");
      out.write("});\r\n");
      out.write("\t   \r\n");
      out.write("function fwdpk1(doc_id1,initatedfrm) {\r\n");
      out.write("var sdate3 = document.getElementById(\"Dateofsubmission3\").value;\r\n");
      out.write(" if (isEmpty(sdate3))  {\r\n");
      out.write("\t var $j=jQuery.noConflict();\r\n");
      out.write("\t\t\r\n");
      out.write("\t var dialogid=\"#dialogid\";\r\n");
      out.write("\t \r\n");
      out.write("\t $j(dialogid).dialog({\r\n");
      out.write("        modal: true,\r\n");
      out.write("        autoOpen: false,\r\n");
      out.write("        title: \"Please Fill the date of submission\",\r\n");
      out.write("        width: 400,\r\n");
      out.write("        height: 200\r\n");
      out.write("    });\r\n");
      out.write("\t \r\n");
      out.write("\t  $j(dialogid).dialog('open');\r\n");
      out.write("return false;\r\n");
      out.write("\t}\r\n");
      out.write(" else {\r\n");
      out.write("document.ForwardUser.stage.value = \"second\";\r\n");
      out.write("document.ForwardUser.document_id.value = doc_id1;\r\n");
      out.write("document.ForwardUser.initatedfrm1.value = initatedfrm;\r\n");
      out.write("document.getElementById(\"ForwardUser\").submit();\r\n");
      out.write("return true;\r\n");
      out.write("          }\r\n");
      out.write("\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("function refreshAndClose()\r\n");
      out.write("{\r\n");
      out.write("   //alert(\"parent Name\"+window.opener);\r\n");
      out.write("\twindow.close();\r\n");
      out.write("    \r\n");
      out.write("    if (window.opener && !window.opener.closed) \r\n");
      out.write("    {\r\n");
      out.write("      window.opener.location.reload(True);\r\n");
      out.write("    } \r\n");
      out.write("}\r\n");
      out.write("</script>\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<link href=\"resources/css/main.css\" rel=\"stylesheet\" type=\"text/css\">\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\">\r\n");
      out.write("<title>Create</title>\r\n");
      out.write("<link rel=\"stylesheet\" href=\"//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css\">\r\n");
      out.write("<link href=\"resources/bootstrap/css/bootstrap.min.css\" rel=\"stylesheet\"/>\r\n");
      out.write("<link href=\"resources/bootstrap/css/bootstrap.css\" rel=\"stylesheet\"/>\r\n");
      out.write("<script src=\"resources/JS/backButton.js\"></script>\r\n");
      out.write("<script src=\"resources/JS/validate230.js\"></script>\r\n");
      out.write("<script src=\"resources/jQuery/jquery-1.12.3.min.js\"></script>\r\n");
      out.write("<script src=\"resources/jQuery/jquery-ui.js\"></script>\r\n");
      out.write(" <script src=\"//code.jquery.com/jquery-1.10.2.js\"></script>\r\n");
      out.write(" <link\r\n");
      out.write("\thref=\"http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.9/themes/blitzer/jquery-ui.css\"\r\n");
      out.write("\trel=\"stylesheet\" type=\"text/css\" />\r\n");
      out.write("\t<script type=\"text/javascript\"\r\n");
      out.write("\tsrc=\"https://code.jquery.com/jquery-1.12.4.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("\tsrc=\"https://code.jquery.com/ui/1.12.1/jquery-ui.js\"></script>\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("\tsrc=\"http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js\"></script>\r\n");
      out.write(" <script\r\n");
      out.write("\tsrc=\"http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.9/jquery-ui.js\"\r\n");
      out.write("\ttype=\"text/javascript\"></script>\r\n");
      out.write(" <script type=\"text/javascript\">\r\n");
      out.write(" //$( window ).unload(function() { window.opener.location.reload(true);\r\n");
      out.write("//\t});\r\n");
      out.write(" </script>\r\n");
      out.write("<style>\r\n");
      out.write(".ui-datepicker-year {\r\n");
      out.write("   background-color: #cc0000;\r\n");
      out.write(" padding-left:20px;\r\n");
      out.write("}\r\n");
      out.write("div.absolute {\r\n");
      out.write("   \tposition:absolute;\r\n");
      out.write("   \tmargin-top: 5px;\r\n");
      out.write("   \tmargin-left: 13px;\r\n");
      out.write("   \tmargin-bottom: 20px;\r\n");
      out.write(" \tpadding: 15 px;\r\n");
      out.write("    width: auto;\r\n");
      out.write("    height: 30px;\r\n");
      out.write("    border: 3px double #ff4d4d;\r\n");
      out.write("    background-color:#ffe6e6;\r\n");
      out.write("        }\r\n");
      out.write("    table.center {\r\n");
      out.write("    margin-left:auto; \r\n");
      out.write("    margin-right:auto;\r\n");
      out.write("  }\r\n");
      out.write("</style>\r\n");
      out.write("</head>\r\n");
      out.write("\r\n");
      out.write("<body>\r\n");
      out.write("<div class=\"absolute\" style=\"font-weight:bold\" ><h8>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Create Assignee List] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h8>\r\n");
      out.write("\r\n");
      out.write("<h8><font style=\"color:red; font-weight:normal\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Welcome&nbsp;</font><font style=\"color:#3333cc; font-weight:normal\">:&nbsp;");
      out.print((String)session.getAttribute("user_name") );
      out.write("&nbsp;&nbsp;&nbsp;</font></h8>\r\n");
      out.write("</div><br>\r\n");
      out.write("<form id='ForwardUser' name='ForwardUser'>\r\n");
      out.write("<INPUT TYPE='HIDDEN' NAME=\"division1\">\r\n");
      out.write("<INPUT TYPE='HIDDEN' NAME=\"stage\">\r\n");
      out.write("<INPUT TYPE='HIDDEN' NAME=\"users\">\r\n");
      out.write("<INPUT TYPE='HIDDEN' NAME=\"HierType\">\r\n");
      out.write("<INPUT TYPE='HIDDEN' NAME=\"Zone_String\">\r\n");
      out.write("<INPUT TYPE='HIDDEN' NAME=\"Division_String\">\r\n");
      out.write("<INPUT TYPE='HIDDEN' NAME=\"DType\">\r\n");
      out.write("<INPUT TYPE='HIDDEN' NAME=\"document_id\">\r\n");
      out.write("<INPUT TYPE='HIDDEN' NAME=\"initatedfrm1\">\r\n");
      out.write("<INPUT TYPE='HIDDEN' NAME=\"submitiondate1\">\r\n");
      out.write("\r\n");

String forwd1=null;
String sub_date3=null;
String sub_date6=null;
String rdstatus = (String) session.getAttribute("RealdateStatus");
String doc_id=request.getParameter("document_id");
String type=request.getParameter("HierType");
String zstr=request.getParameter("Zone_String");
String dstr=request.getParameter("Division_String");
String doc_type=request.getParameter("DType");
String docmap_id = request.getParameter("Document_Map_ID");
String submitiondate=request.getParameter("submitiondate");
System.out.println("pk check="+ doc_id+submitiondate);

      out.write('\r');
      out.write('\n');
      //  c:if
      org.apache.taglibs.standard.tag.rt.core.IfTag _jspx_th_c_005fif_005f0 = (org.apache.taglibs.standard.tag.rt.core.IfTag) _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.IfTag.class);
      boolean _jspx_th_c_005fif_005f0_reused = false;
      try {
        _jspx_th_c_005fif_005f0.setPageContext(_jspx_page_context);
        _jspx_th_c_005fif_005f0.setParent(null);
        // /Admin/forwardingUser.jsp(151,0) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
        _jspx_th_c_005fif_005f0.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${param.stage == null}", java.lang.Boolean.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false)).booleanValue());
        int _jspx_eval_c_005fif_005f0 = _jspx_th_c_005fif_005f0.doStartTag();
        if (_jspx_eval_c_005fif_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
          do {
            out.write('\r');
            out.write('\n');



String initatedfrm=request.getParameter("initatedfrm");

            out.write("\r\n");
            out.write("\r\n");
            out.write("<div style='vertical-align: baseline; padding: 10px; margin: 20px;'></div>\r\n");


String docdivision=null;
Connection conn = null;
Statement stmt = null;
ResultSet rs = null, rs1 = null, rs3 = null,rs4=null,rs5=null,rs12=null;
java.util.ArrayList<String> userlistal=new java.util.ArrayList<String>();
java.util.ArrayList<String> userlistal123=new java.util.ArrayList<String>();
java.util.ArrayList<String> divisiondays=new java.util.ArrayList<String>();
java.util.ArrayList<String> zonedays=new java.util.ArrayList<String>();
PreparedStatement ps1 = null, ps3 = null,ps4=null,ps5=null,ps12=null;
try {
	Context initCtx = new InitialContext();
	Context envCtx = (Context) initCtx.lookup("java:comp/env");
	DataSource ds = (DataSource) envCtx.lookup("jdbc/MySQLDB");

	conn = ds.getConnection();

java.util.ArrayList<String> dival=new java.util.ArrayList<String>();		
java.util.ArrayList<String> zonal=new java.util.ArrayList<String>();	
String divisionid_u=null,userid_u=null,usrids_u=null,zoneid_u=null,zone_u=null; 
String div_sql_u = "select division_id from xx_divisions_master where division_name='"+dstr+"' ";
PreparedStatement divPS1_u = conn.prepareStatement(div_sql_u);


ResultSet divRS1_u = divPS1_u.executeQuery();
if (divRS1_u.next()){
	divisionid_u=divRS1_u.getString("division_id");


}

userid_u="select * from xx_user_master where Type='MOR' and Division_ID='"+divisionid_u+"' order by User_name";
PreparedStatement divPS2_u = conn.prepareStatement(userid_u);
ResultSet divRS2_u = divPS2_u.executeQuery();


while (divRS2_u.next()){
usrids_u=divRS2_u.getString("User_name");
	
dival.add(usrids_u);	

}
String div_sql2_u = "select Ext_Zone_Id from xx_divisions_map where division_id="+divisionid_u;
PreparedStatement divPS3_u = conn.prepareStatement(div_sql2_u);
	
	
	ResultSet divRS3_u = divPS3_u.executeQuery();
	if (divRS3_u.next()){
		zoneid_u=divRS3_u.getString("Ext_Zone_Id");
	}
	String zon_sql_u = "select Zone_Name from xx_zones_master where Zone_Id='"+zoneid_u+"'";
	PreparedStatement zonPS_u = conn.prepareStatement(zon_sql_u);
	ResultSet zonRS_u = zonPS_u.executeQuery();
	while(zonRS_u.next()){
	zone_u=zonRS_u.getString("Zone_Name");
	
	}
	

					
					String zone_sql2_u="select * from xx_user_master where Zone_ID='"+zoneid_u+"' and Division_Id= 86 order by User_name";
					PreparedStatement zonPS1_u = conn.prepareStatement(zone_sql2_u);
					ResultSet zonRS1_u = zonPS1_u.executeQuery();
					String userid1_u=null;
					while(zonRS1_u.next()){
						
						userid1_u=zonRS1_u.getString("User_name");
						
						// add to arraylist
						
						zonal.add(userid1_u);
					
					}

if(type.equalsIgnoreCase("Division")){
	
	
					String divisionHid=null,userid=null,usrids=null; 
					String div_sql1 = "select * from xx_document_mapping where document_Map_ID='"+doc_id+"'";
					PreparedStatement divPS1 = conn.prepareStatement(div_sql1);
					
					
					ResultSet divRS1 = divPS1.executeQuery();
					if (divRS1.next()){
						divisionHid=divRS1.getString("Division_HierarchyId");
					
					
					}
					if(divisionHid!=null){
					userid="select * from xx_doc_divisions_hierarchy where Hierarchy_id="+divisionHid;
					PreparedStatement divPS2 = conn.prepareStatement(userid);
					ResultSet divRS2 = divPS2.executeQuery();
					
					
					while (divRS2.next()){
					usrids=divRS2.getString("userid");
						
					// added in arraylist		
					userlistal.add(usrids);
					}
					}			
					}

else if(type.equalsIgnoreCase("Zone")){
	
	String zoneHid=null;
	String zon_sql = "select * from xx_document_mapping where document_Map_ID='"+doc_id+"'";
	PreparedStatement zonPS = conn.prepareStatement(zon_sql);
	ResultSet zonRS = zonPS.executeQuery();
	while(zonRS.next()){
		zoneHid=zonRS.getString("Zone_HierarchyId");
	
	}
	if(zoneHid!=null){
				String zone_sql2="select * from xx_doc_zones_hierarchy where Hierarchy_id="+zoneHid;
					PreparedStatement zonPS1 = conn.prepareStatement(zone_sql2);
					ResultSet zonRS1 = zonPS1.executeQuery();
					String userid1=null;
					while(zonRS1.next()){
						
						userid1=zonRS1.getString("userid");
						
				//added in arraylist	
						userlistal.add(userid1);
					}
	}
					
				
} else if(type.equalsIgnoreCase("Both")){
	String divisionHid=null,userid=null,usrids=null,days=null,testdays=null; 
	String div_sql1 = "select * from xx_document_mapping where document_Map_ID='"+doc_id+"'";
	
	PreparedStatement divPS1 = conn.prepareStatement(div_sql1);
	
	
	ResultSet divRS1 = divPS1.executeQuery();
	if (divRS1.next()){
		divisionHid=divRS1.getString("Division_HierarchyId");
	
	
	}
	if(divisionHid!=null){
	userid="select * from xx_doc_divisions_hierarchy where Hierarchy_id='"+divisionHid+"'";
	PreparedStatement divPS2 = conn.prepareStatement(userid);
	ResultSet divRS2 = divPS2.executeQuery();
	
	
	while (divRS2.next()){
	usrids=divRS2.getString("userid");
	days=divRS2.getString("Days");
	userlistal.add(usrids);
	divisiondays.add(days);
	// added in arraylist				
	}
	}
	String zoneHid=null;
	String zon_sql = "select * from xx_document_mapping where document_Map_ID='"+doc_id+"' order by Zone_HierarchyId";
	PreparedStatement zonPS = conn.prepareStatement(zon_sql);
	ResultSet zonRS = zonPS.executeQuery();
	while(zonRS.next()){
		zoneHid=zonRS.getString("Zone_HierarchyId");
	
	}
	if(zoneHid!=null){
				String zone_sql2="select * from xx_doc_zones_hierarchy where Hierarchy_id='"+zoneHid+"' order by userid";
					PreparedStatement zonPS1 = conn.prepareStatement(zone_sql2);
					ResultSet zonRS1 = zonPS1.executeQuery();
					String userid1=null;
					while(zonRS1.next()){
						
						userid1=zonRS1.getString("userid");
						days=zonRS1.getString("Days");
						userlistal.add(userid1);
						divisiondays.add(days);
						zonedays.add(days);
				//added in arraylist	
					
					}
	}
						



String performed=null,days1=null;
	String zone_sql22="select * from xx_record_actions where Document_id='"+doc_id+"' and ActionPerformed IN('Forward With Approval','pending','approved','return','Resubmitted','Finally Approved','Returned to rvnl','Forward Without Approval')";
	PreparedStatement zonPS12 = conn.prepareStatement(zone_sql22);
	ResultSet zonRS12 = zonPS12.executeQuery();
	
	while(zonRS12.next()){
		
		performed=zonRS12.getString("ActionPerformedBy");
		days1=zonRS12.getString("AssignedDays");
		userlistal123.add(performed);
		divisiondays.add(days1);
//added in arraylist	
	
	}


}

boolean retval = userlistal123.isEmpty();
int flag=0;
boolean ret = userlistal.isEmpty();

boolean div1 = dival.isEmpty();
boolean div2 = zonal.isEmpty();
 if (((div1 == true) && (div2 == true))){
	 
	 if(submitiondate!=null){
			

            out.write("\r\n");
            out.write("<br><br><br><br><br>\r\n");
            out.write("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button type=\"button\" class=\"btn btn-primary\" onclick=\"javascript:submitlistusers('Both','");
            out.print(doc_id);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(zstr);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(dstr);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(doc_type);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(initatedfrm);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(submitiondate);
            out.write("');\" disabled>Submit</button>\t\t\t\t\r\n");
            out.write("\r\n");
            out.write("<div style=\"text-align:center;color:red;font-size: 20px;\"><b>No Assignee List exists !</b></div><br><br><br>\r\n");
            out.write("<div><button type=\"button\" class=\"btn btn-primary\" onclick=\"location.href='user_index.jsp'\" style=\"margin-left:50%;\">Close</button></div>\r\n");
            out.write("\r\n");
}
	 else{
		 
            out.write("\r\n");
            out.write("\t\t <br><br><br><br><br>\r\n");
            out.write("\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button type=\"button\" class=\"btn btn-primary\" onclick=\"javascript:submitlistusers('Both','");
            out.print(doc_id);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(zstr);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(dstr);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(doc_type);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(initatedfrm);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(submitiondate);
            out.write("');\" disabled>Submit</button>\t\t\t\t\r\n");
            out.write("\t\t\r\n");
            out.write("\t\t<div style=\"text-align:center;color:red;font-size: 20px;\"><b>No Assignee List exists !</b></div><br><br><br>\r\n");
            out.write("\t\t<div><button type=\"button\" class=\"btn btn-primary\" onClick=\"refreshAndClose()\" style=\"margin-left:50%;width:8%;\">Close</button></div>\r\n");
            out.write("\t\t\r\n");
            out.write("\t\t");
	 
	 }
 }
 else if (((retval == false) || (ret == false)) && (type.equalsIgnoreCase("Both"))){

            out.write("\r\n");
            out.write("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Division:</strong><br>\r\n");
            out.write("<div>\t<table  class=\"table table-hover table-bordered\" style=\"width:40%; margin-left:50px;\">\r\n");
            out.write("<tr><th style=\"padding-left: 75px;\"><strong> Users </strong></th> <th ><center><strong>Target Time For Approval (Days)</strong></center></th></tr>\r\n");
          
	        Iterator<String> divitr=dival.iterator();
			Iterator<String> divitr1=divisiondays.iterator();
				String username=null,days=null;
			while(divitr.hasNext()){
				username=divitr.next();

				if(userlistal123.contains(username) && userlistal.contains(username) && divitr1.hasNext()){
					days=divitr1.next();
				
            out.write("\r\n");
            out.write("\t\t\t\t\t  <tr><td>\r\n");
            out.write("\t\t\t\t\t <input type =\"checkbox\"  name=\"useriddiv1\" id=\"useriddiv1\" style=\"margin-left:50px;\" value=\"");
            out.print(username);
            out.write("\" checked disabled> ");
            out.print(username);
            out.write(" <input type =\"hidden\" name=\"useriddiv\" id=\"useriddiv\" style=\"margin-left:50px;\" value=\"");
            out.print(username);
            out.write("\"> <br></td><td><center><input type=\"number\" id=\"divisionnumber1\"  name=\"divisionnumber1\" readonly=\"readonly\"  value=\"");
            out.print(days);
            out.write("\" min=\"1\" style=\"width: 20%; text-align:center;\" disabled> <input type =\"hidden\" name=\"divisionnumber\" id=\"divisionnumber\" style=\"margin-left:50px;\" value=\"");
            out.print(days);
            out.write("\"> </center></td></tr>\r\n");
            out.write("\t\t\t\t\t\t\t\t\t");

					userlistal.remove(username);
				}
				
				else if(userlistal.contains(username) && divitr1.hasNext()){
					days=divitr1.next();
					
            out.write("\r\n");
            out.write("\t\t\t\t\t <tr> <td>\r\n");
            out.write("\t\t\t\t\t<input type ='checkbox' class=\"Blocked\" name='useriddiv' id='useriddiv' style=\"margin-left:50px;\" value=\"");
            out.print(username);
            out.write("\" checked> ");
            out.print(username);
            out.write("<br></td><td><center><input type=\"number\" id=\"divisionnumber\" class=\"textbox\" value=\"");
            out.print(days);
            out.write("\" name=\"divisionnumber\" min=\"1\" style=\"width: 20%; text-align:center;\"></center></td>\r\n");
            out.write("\t\t\t\t\t\r\n");
            out.write("\t\t\t\t\t");

					
				}else{
					
            out.write("\r\n");
            out.write("\t\t\t \t<tr> <td><input type ='checkbox' class=\"Blocked\" name='useriddiv' id='useriddiv' style=\"margin-left:50px;\" value=\"");
            out.print(username);
            out.write("\" > ");
            out.print(username);
            out.write("<br></td><td><center><input type=\"number\" id=\"divisionnumber\" class=\"textbox\" name=\"divisionnumber\"  min=\"1\" style=\"width: 20%; text-align:center;\" disabled></center></td>\r\n");
            out.write("\t\t\t\t \r\n");
            out.write("\t\t\t\t ");

				}
			}
			
            out.write("\r\n");
            out.write("\t\t\t</table></div>\r\n");
            out.write("\t\t\t<br> \r\n");
            out.write("\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Zone:</strong><br>\r\n");
            out.write("<div>\t<table  class=\"table table-hover table-bordered\" style=\"width:40%; margin-left:50px;\">\r\n");
            out.write("<tr><th style=\"padding-left: 75px;\"><strong> Users </strong></th> <th ><center><strong>Target Time For Approval (Days)</strong></center></th></tr>\r\n");
            out.write("\t\r\n");
            out.write("\t\t\t");

			 Iterator<String> zonitr=zonal.iterator();
			Iterator<String> zonitr1=zonedays.iterator();
			String userdays=null;
		while(zonitr.hasNext()){
			username=zonitr.next();
			if(userlistal123.contains(username) && userlistal.contains(username)  && zonitr1.hasNext()){
				userdays=zonitr1.next();
				
            out.write("\r\n");
            out.write("\t\t\t\t<tr><td>\r\n");
            out.write("\t\t\t\t <input type ='checkbox' name='useridzon1' id='useridzon1' style=\"margin-left:50px;\" value=\"");
            out.print(username);
            out.write("\" checked disabled> ");
            out.print(username);
            out.write("<input type ='hidden' name='useridzon' id='useridzon' style=\"margin-left:50px;\" value=\"");
            out.print(username);
            out.write("\" ><br></td><td><center><input type=\"number\" id=\"zonenumber\" value=\"");
            out.print(userdays);
            out.write("\" name=\"zonenumber\" readonly=\"readonly\" min=\"1\" style=\"width: 20%; text-align:center;\" disabled> <input type =\"hidden\" name=\"zonenumber\" id=\"zonenumber\" style=\"margin-left:50px;\" value=\"");
            out.print(days);
            out.write("\"> </td></center></tr>\r\n");
            out.write("\t\t\t\t\r\n");
            out.write("\t\t\t\t");

				userlistal.remove(username);
			}
			
			else if(userlistal.contains(username) && zonitr1.hasNext()){
				userdays=zonitr1.next();
				
            out.write("\r\n");
            out.write("\t\t\t\t <tr><td>\r\n");
            out.write("\t\t\t\t <input type ='checkbox' class=\"Blocked\" name='useridzon' id='useridzon' style=\"margin-left:50px;\" value=\"");
            out.print(username);
            out.write("\" checked> ");
            out.print(username);
            out.write("<br></td><td><center><input type=\"number\" class=\"textbox\" id=\"zonenumber\" value=\"");
            out.print(userdays);
            out.write("\" name=\"zonenumber\" min=\"1\" style=\"width: 20%; text-align:center;\" ></center></td></tr> \r\n");
            out.write("\t\t\t\t");

				
			}else{
				
            out.write("\r\n");
            out.write("\t\t \t<tr><td><input type ='checkbox' class=\"Blocked\" name='useridzon' id='useridzon' style=\"margin-left:50px;\" value=\"");
            out.print(username);
            out.write("\" > ");
            out.print(username);
            out.write("<br></td><td><center><input type=\"number\" class=\"textbox\" id=\"zonenumber\" name=\"zonenumber\" min=\"1\" style=\"width: 20%; text-align:center;\" disabled></center></td></tr>\r\n");
            out.write("\t\t\t ");

			}
		}
 
            out.write("\r\n");
            out.write("</table></div>\r\n");
            out.write("<br><br> \r\n");
            out.write("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button type=\"button\" style=\"margin-left:150px;\" class=\"btn btn-primary\" onclick=\"javascript:submitlistusers('Both','");
            out.print(doc_id);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(zstr);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(dstr);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(doc_type);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(initatedfrm);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(submitiondate);
            out.write("');\">Submit</button>\t\t\r\n");
            out.write(" &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input class='btn btn-primary' value='Cancel'  style=\"margin-left:100px;\" onClick=\" javascript:window.close(); return refreshAndClose();\" type='button'/>\t\r\n");
            out.write("<br><br>");
			
		} else {
	
            out.write("\r\n");
            out.write("\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Division:</strong><br>\r\n");
            out.write("<div><table  class=\"table table-hover table-bordered\" style=\"width:40%; margin-left:50px;\">\r\n");
            out.write("<tr><th style=\"padding-left: 75px;\"><strong> Users </strong></th> <th ><center><strong>Target Time For Approval (Days)</strong></center></th></tr>\r\n");
            out.write("\t");

		
	Iterator<String> divitr=dival.iterator();
					String username=null;
				while(divitr.hasNext()){
					username=divitr.next();
					
						
            out.write("\r\n");
            out.write("\t\t\t\t \t<tr><td>\r\n");
            out.write("\t\t\t\t \t<input type ='checkbox'  class=\"Blocked\" name='useriddiv' id='useriddiv' onclick=\"myFunction(this)\" style=\"margin-left:50px;\" value=\"");
            out.print(username);
            out.write("\" > ");
            out.print(username);
            out.write("</td><td><center><input type=\"number\" id=\"divisionnumber\" class=\"textbox\" name=\"divisionnumber\" min=\"1\" style=\"width: 20%; text-align:center;\" disabled></center></td>\r\n");
            out.write("\t\t\t\t \t \r\n");
            out.write("\t\t\t\t\t ");

				}
				
            out.write("\r\n");
            out.write("\t\t\t\t</table><br> <br></div>\r\n");
            out.write("\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Zone:</strong><br>\r\n");
            out.write("<div>\t<table  class=\"table table-hover table-bordered\" style=\"width:40%; margin-left:50px;\">\r\n");
            out.write("<tr><th style=\"padding-left: 75px;\"><strong> Users </strong></th> <th ><center><strong>Target Time For Approval (Days)</strong></center></th></tr>\r\n");
            out.write("\t\t\t\t");

				 Iterator<String> zonitr=zonal.iterator();
				//String username=null;
			while(zonitr.hasNext()){
				username=zonitr.next();
				
					
            out.write("\r\n");
            out.write("\t\t\t <tr><td>\r\n");
            out.write("\t\t\t<input type ='checkbox' name='useridzon'  class=\"Blocked\" id='useridzon' onclick=\"myFunction(this)\" style=\"margin-left:50px;\" value=\"");
            out.print(username);
            out.write("\" > ");
            out.print(username);
            out.write("</td><td><center><input type=\"number\" class=\"textbox\" id=\"zonenumber\" name=\"zonenumber\" min=\"1\" style=\"width: 20%; text-align:center;\" disabled></center></td>\r\n");
            out.write("\t\t\t \t\t \t\t \t\t\t\t\t \r\n");
            out.write("\t\t\t\t ");

				
			}
	
            out.write("</table>\t<br><br></div>\r\n");
            out.write("\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button type=\"button\" class=\"btn btn-primary\" onclick=\"javascript:submitlistusers('Both','");
            out.print(doc_id);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(zstr);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(dstr);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(doc_type);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(initatedfrm);
            out.write('\'');
            out.write(',');
            out.write('\'');
            out.print(submitiondate);
            out.write("');\" style=\"margin-left:150px;\">Submit</button>\t\t\t\t\r\n");
            out.write("\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type=\"reset\"\r\n");
            out.write("\t\t\t\tclass=\"btn btn-primary\" value=\"Cancel\" style=\"margin-left:100px;\" onClick=\"window.open('javascript:location.reload(true);', 'c_document'); javascript:window.close(); return refreshAndClose();\"  />\r\n");
            out.write("\t<br><br>\r\n");
            out.write("\t");

		}
 } catch(Exception e){
							e.printStackTrace();
						}	finally {
						    try { conn.close(); } catch (Exception e) { /* ignored */ }
						}
 
            out.write("\t\r\n");
            out.write("<br>\r\n");
            out.write(" ");
            int evalDoAfterBody = _jspx_th_c_005fif_005f0.doAfterBody();
            if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
              break;
          } while (true);
        }
        if (_jspx_th_c_005fif_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
          return;
        }
        _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.reuse(_jspx_th_c_005fif_005f0);
        _jspx_th_c_005fif_005f0_reused = true;
      } finally {
        org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fif_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fif_005f0_reused);
      }
      out.write("\r\n");
      out.write(" <div id=\"dialogid\" style=\"display: none\"\r\n");
      out.write("\t\t\t\t\t\t\t\talign=\"center\">\r\n");
      out.write("\t\t\t\t\t\t\t\t<br> Please Select Data<br>\r\n");
      out.write("\t\t\t\t\t\t\t\t<br>\r\n");
      out.write("\t\t\t\t\t\t\t\t<button id=\"cancle\" class=\"btn btn-primary\"\r\n");
      out.write("\t\t\t\t\t\t\t\t\tonclick=\"jQuery.noConflict();$('#dialogid').dialog('close');\">OK</button>\r\n");
      out.write("\t\t\t\t\t\t\t</div>\r\n");
      out.write(" ");
      //  c:if
      org.apache.taglibs.standard.tag.rt.core.IfTag _jspx_th_c_005fif_005f1 = (org.apache.taglibs.standard.tag.rt.core.IfTag) _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.IfTag.class);
      boolean _jspx_th_c_005fif_005f1_reused = false;
      try {
        _jspx_th_c_005fif_005f1.setPageContext(_jspx_page_context);
        _jspx_th_c_005fif_005f1.setParent(null);
        // /Admin/forwardingUser.jsp(526,1) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
        _jspx_th_c_005fif_005f1.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${param.stage !=null}", java.lang.Boolean.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false)).booleanValue());
        int _jspx_eval_c_005fif_005f1 = _jspx_th_c_005fif_005f1.doStartTag();
        if (_jspx_eval_c_005fif_005f1 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
          do {
            out.write("\r\n");
            out.write("\r\n");
            out.write(" ");

 
 //System.out.println("my stage val="+ request.getParameter("stage"));
 String stageofpage=request.getParameter("stage");
 if(stageofpage.equalsIgnoreCase("first")){
 String document_id=request.getParameter("document_id");
 
 String DType=request.getParameter("DType");
 
 String Zone_String=request.getParameter("Zone_String");
 
 String Division_String=request.getParameter("Division_String");
 
 String usersdiv[]=request.getParameterValues("useriddiv");
 
 String initatedfrm=request.getParameter("initatedfrm1");
 String submitiondate2=request.getParameter("submitiondate1");
 String divisionnumber[]=request.getParameterValues("divisionnumber");
 String userszon[]=request.getParameterValues("useridzon");
 String zonenumber[]=request.getParameterValues("zonenumber"); 

	
  Connection conn=null;
 try {
		Context initCtx = new InitialContext();
		Context envCtx = (Context) initCtx.lookup("java:comp/env");
		DataSource ds = (DataSource) envCtx.lookup("jdbc/MySQLDB");

		conn = ds.getConnection();
  
if(initatedfrm.equalsIgnoreCase("recreate") ){
	 Statement selectStmt = conn.createStatement();
     String selecthier = "select Ext_Zone_Id from xx_divisions_map where Division_Name='"+Division_String+"'";
     ResultSet rs = selectStmt.executeQuery(selecthier);
     String zoneid1 = null;
     while(rs.next()){
    	 zoneid1 = rs.getString(1);
     }
     String selecthier1 = "select zone_name from xx_zones_master where zone_id="+zoneid1;
     ResultSet rs1 = selectStmt.executeQuery(selecthier1);
     String zonename1 = null;
     while(rs1.next()){
    	 zonename1 = rs1.getString(1);
     }

     Zone_String=zonename1;
	
	
 }

 
 String HierType=request.getParameter("HierType");
 if(HierType.equalsIgnoreCase("Division")){
	 
	 Statement selectStmt = conn.createStatement();
     String selecthier = "select max(hierarchy_id)+1 from xx_doc_divisions_hierarchy";
     ResultSet rs = selectStmt.executeQuery(selecthier);
     String hierId = null;
     while(rs.next()){
  	  hierId = rs.getString(1);
     }
     
     
     
     
     
     Statement stmt = conn.createStatement();

     for (int i=0;i<usersdiv.length;i++){
    	 int j=i+1;
     
     String sql = "INSERT INTO xx_doc_divisions_hierarchy (division,document_type,level,hierarchy_id,document_id,userid,Days)" +
             "VALUES ('"+Division_String+"','"+DType+"',"+j+",'"+hierId+"','"+document_id+"','"+usersdiv[i]+"',"+divisionnumber[i]+")";
	 stmt.executeUpdate(sql); 
     } 
     if(initatedfrm.equalsIgnoreCase("recreate") ){
    	 Statement stmtupd = conn.createStatement();
         String sqlupd = "update xx_document_mapping set Division_HierarchyID="+hierId+",HierarchyType='Division' where Document_Map_ID ="+document_id;
    	 stmt.executeUpdate(sqlupd); 
    		 
     }else{
    
    Statement stmtupd = conn.createStatement();
     String sqlupd = "update xx_document_mapping set Forwarded ='No',Division_HierarchyID="+hierId+",HierarchyType='Division' where Document_Map_ID ="+document_id;
	 stmt.executeUpdate(sqlupd); 
		
     	
     	
     }
	 
	 
 }else if(HierType.equalsIgnoreCase("Zone")){
	 
	 Statement selectStmt = conn.createStatement();
	 String selectzon = "select max(hierarchy_id)+1 from xx_doc_zones_hierarchy";
     ResultSet rs = selectStmt.executeQuery(selectzon);
     String hierId = null;
     while(rs.next()){
  	  hierId = rs.getString(1);
     }
     
     
     
     
     Statement stmt = conn.createStatement();
     for (int i=0;i<userszon.length;i++){
    	 int j=i+1;
    	 String sql = "INSERT INTO xx_doc_zones_hierarchy (zone,document_type,level,hierarchy_id,document_id,userid,Days)" +
                 "VALUES ('"+Zone_String+"','"+DType+"',"+j+",'"+hierId+"','"+document_id+"','"+userszon[i]+"',"+zonenumber[i]+")";
		 stmt.executeUpdate(sql);
    	 
    	 }
     if(initatedfrm.equalsIgnoreCase("recreate")){
    	 Statement stmtupd = conn.createStatement();
         String sqlupd = "update xx_document_mapping Zone_HierarchyID="+hierId+",HierarchyType='Zone' where Document_Map_ID ="+document_id;
    	 stmtupd.executeUpdate(sqlupd);
     }else{
    	 Statement stmtupd = conn.createStatement();
         String sqlupd = "update xx_document_mapping set Forwarded ='No',Zone_HierarchyID="+hierId+",HierarchyType='Zone' where Document_Map_ID ="+document_id;
    	 stmtupd.executeUpdate(sqlupd);	 
     }
      
	 
	 
 }else if(HierType.equalsIgnoreCase("Both")){
	 //System.out.println("..   you are here ....."+document_id);
	 Statement selectStmtdiv = conn.createStatement();
	 String selecthierdiv =null;
	 String selecthierdiv1 =null;
	 String divExist="No";
	 String hierIddiv = null;
	 if(initatedfrm.equalsIgnoreCase("create")){
	  selecthierdiv = "select max(hierarchy_id)+1 from xx_doc_divisions_hierarchy";
	 } else if(initatedfrm.equalsIgnoreCase("recreate")) {
		 //System.out.println(".. 132532 you ...."+initatedfrm);
		  selecthierdiv1 = "select Division_HierarchyId from xx_document_mapping where document_Map_ID='"+document_id+"'";
		  ResultSet rsdiv1 = selectStmtdiv.executeQuery(selecthierdiv1);
		     String hierIddiv1 = null;
		     //System.out.println(".. 1 you ...."+selecthierdiv1);
		     while(rsdiv1.next()){
		  	  hierIddiv1 = rsdiv1.getString(1);
		     }
		   //  System.out.println(".. 11 you ...."+hierIddiv1);
		     if (hierIddiv1!=null) {
		    	 divExist="Yes";
		    	 hierIddiv = hierIddiv1;
		     } else {
		  selecthierdiv = "select max(hierarchy_id)+1 from xx_doc_divisions_hierarchy";
		     }
	 }
	 //System.out.println(".. 1 you ...."+selecthierdiv);
	 if (divExist.equalsIgnoreCase("No")) {
     ResultSet rs = selectStmtdiv.executeQuery(selecthierdiv);
    // String hierIddiv = null;
     while(rs.next()){
  	  hierIddiv = rs.getString(1);
  	 //System.out.println(".. 3 you ...."+hierIddiv);
     }
   }
	 
	 //System.out.println("..0000. pk here -----updated zone length......."+usersdiv+userszon);
     Statement selectStmt = conn.createStatement();
     String selectzon=null;
     String selectzon1=null;
     String zonExist = "No";
     String hierIdzon = null;
     if(initatedfrm.equalsIgnoreCase("create")){
      selectzon = "select max(hierarchy_id)+1 from xx_doc_zones_hierarchy";
     } else if(initatedfrm.equalsIgnoreCase("recreate")){
    	 selectzon1 = "select Zone_HierarchyId from xx_document_mapping where document_Map_ID='"+document_id+"'";
    	 ResultSet rszon1 = selectStmtdiv.executeQuery(selectzon1);
	     String hierIdzon1 = null;
	     while(rszon1.next()){
	  	  hierIdzon1 = rszon1.getString(1);
	     }
	   //  System.out.println("..02....updated zone length......."+hierIdzon1);
	     if (hierIdzon1!=null) {
	    	 zonExist="Yes";
	    	 hierIdzon = hierIdzon1;
	        } else {
    	 selectzon = "select max(hierarchy_id)+1 from xx_doc_zones_hierarchy";
     }
 }
     if (zonExist.equalsIgnoreCase("No")) { 
     ResultSet rszon = selectStmt.executeQuery(selectzon);
     //System.out.println("..03....updated zone length......."+selectzon);
     while(rszon.next()){
  	  hierIdzon = rszon.getString(1);
  	//System.out.println("..04....updated zone length......."+hierIdzon);
     }
     } 
     //System.out.println("..01....updated zone length......."+usersdiv+userszon);
     Statement stmt = conn.createStatement();
	// if(userszon!=null){
		 if(initatedfrm.equalsIgnoreCase("create") && userszon!=null){
			for (int i=0;i<userszon.length;i++){
	    	 int j=i+1;
	    	 String sql = "INSERT INTO xx_doc_zones_hierarchy (zone,document_type,level,hierarchy_id,document_id,userid, Days)" +
	                 "VALUES ('"+Zone_String+"','"+DType+"',"+j+",'"+hierIdzon+"','"+document_id+"','"+userszon[i]+"',"+zonenumber[i]+")";
			 stmt.executeUpdate(sql);
	    	
	    	 }
		 
		// System.out.println("..1....updated zone assignees....");
	 } else  if(initatedfrm.equalsIgnoreCase("recreate")){
		 
		 
            out.write("\r\n");
            out.write("\t\t ");
            //  sql:update
            org.apache.taglibs.standard.tag.rt.sql.UpdateTag _jspx_th_sql_005fupdate_005f0 = (org.apache.taglibs.standard.tag.rt.sql.UpdateTag) _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource.get(org.apache.taglibs.standard.tag.rt.sql.UpdateTag.class);
            boolean _jspx_th_sql_005fupdate_005f0_reused = false;
            try {
              _jspx_th_sql_005fupdate_005f0.setPageContext(_jspx_page_context);
              _jspx_th_sql_005fupdate_005f0.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fif_005f1);
              // /Admin/forwardingUser.jsp(735,3) name = dataSource type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_sql_005fupdate_005f0.setDataSource("jdbc/MySQLDB");
              // /Admin/forwardingUser.jsp(735,3) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_sql_005fupdate_005f0.setVar("rs");
              int[] _jspx_push_body_count_sql_005fupdate_005f0 = new int[] { 0 };
              try {
                int _jspx_eval_sql_005fupdate_005f0 = _jspx_th_sql_005fupdate_005f0.doStartTag();
                if (_jspx_eval_sql_005fupdate_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
                  if (_jspx_eval_sql_005fupdate_005f0 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                    _jspx_push_body_count_sql_005fupdate_005f0[0]++;
                    out = org.apache.jasper.runtime.JspRuntimeLibrary.startBufferedBody(_jspx_page_context, _jspx_th_sql_005fupdate_005f0);
                  }
                  do {
                    out.write("\r\n");
                    out.write("\t\t\t   DELETE FROM xx_doc_zones_hierarchy where document_id='");
                    out.print(document_id);
                    out.write("';\r\n");
                    out.write("\t\t\t");
                    int evalDoAfterBody = _jspx_th_sql_005fupdate_005f0.doAfterBody();
                    if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
                      break;
                  } while (true);
                  if (_jspx_eval_sql_005fupdate_005f0 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                    out = _jspx_page_context.popBody();
                    _jspx_push_body_count_sql_005fupdate_005f0[0]--;
                  }
                }
                if (_jspx_th_sql_005fupdate_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
                  return;
                }
              } catch (java.lang.Throwable _jspx_exception) {
                while (_jspx_push_body_count_sql_005fupdate_005f0[0]-- > 0)
                  out = _jspx_page_context.popBody();
                _jspx_th_sql_005fupdate_005f0.doCatch(_jspx_exception);
              } finally {
                _jspx_th_sql_005fupdate_005f0.doFinally();
              }
              _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource.reuse(_jspx_th_sql_005fupdate_005f0);
              _jspx_th_sql_005fupdate_005f0_reused = true;
            } finally {
              org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_sql_005fupdate_005f0, _jsp_getInstanceManager(), _jspx_th_sql_005fupdate_005f0_reused);
            }
            out.write("\r\n");
            out.write("\t\t ");

		 if (userszon!=null){
		 for (int i=0;i<userszon.length;i++){
	    	 int j=i+1;
	    	 String sql = "INSERT INTO xx_doc_zones_hierarchy (zone,document_type,level,hierarchy_id,document_id,userid, Days)" +
	                 "VALUES ('"+Zone_String+"','"+DType+"',"+j+",'"+hierIdzon+"','"+document_id+"','"+userszon[i]+"',"+zonenumber[i]+")";
			 stmt.executeUpdate(sql);
	    	
	    	 }
		  }
	 }
	 //}
	// if(usersdiv!=null){
		 Statement stmt1 = conn.createStatement();
		 if(initatedfrm.equalsIgnoreCase("create") && usersdiv!=null){
			 
		     for (int i=0;i<usersdiv.length;i++){
		    	 int j=i+1;
		     
		     String sql = "INSERT INTO xx_doc_divisions_hierarchy (division,document_type,level,hierarchy_id,document_id,userid, Days)" +
		             "VALUES ('"+Division_String+"','"+DType+"',"+j+",'"+hierIddiv+"','"+document_id+"','"+usersdiv[i]+"',"+divisionnumber[i]+")";
		    
			 stmt1.executeUpdate(sql); 
		     }  
		    // System.out.println("..2....updated division assignees....");
			 }
			 else  if(initatedfrm.equalsIgnoreCase("recreate")){
				 
				 
            out.write("\r\n");
            out.write("\t\t\t\t ");
            //  sql:update
            org.apache.taglibs.standard.tag.rt.sql.UpdateTag _jspx_th_sql_005fupdate_005f1 = (org.apache.taglibs.standard.tag.rt.sql.UpdateTag) _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource.get(org.apache.taglibs.standard.tag.rt.sql.UpdateTag.class);
            boolean _jspx_th_sql_005fupdate_005f1_reused = false;
            try {
              _jspx_th_sql_005fupdate_005f1.setPageContext(_jspx_page_context);
              _jspx_th_sql_005fupdate_005f1.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fif_005f1);
              // /Admin/forwardingUser.jsp(767,5) name = dataSource type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_sql_005fupdate_005f1.setDataSource("jdbc/MySQLDB");
              // /Admin/forwardingUser.jsp(767,5) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_sql_005fupdate_005f1.setVar("rs");
              int[] _jspx_push_body_count_sql_005fupdate_005f1 = new int[] { 0 };
              try {
                int _jspx_eval_sql_005fupdate_005f1 = _jspx_th_sql_005fupdate_005f1.doStartTag();
                if (_jspx_eval_sql_005fupdate_005f1 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
                  if (_jspx_eval_sql_005fupdate_005f1 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                    _jspx_push_body_count_sql_005fupdate_005f1[0]++;
                    out = org.apache.jasper.runtime.JspRuntimeLibrary.startBufferedBody(_jspx_page_context, _jspx_th_sql_005fupdate_005f1);
                  }
                  do {
                    out.write("\r\n");
                    out.write("\t\t\t\t\t   DELETE FROM xx_doc_divisions_hierarchy where document_id='");
                    out.print(document_id);
                    out.write("';\r\n");
                    out.write("\t\t\t\t\t");
                    int evalDoAfterBody = _jspx_th_sql_005fupdate_005f1.doAfterBody();
                    if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
                      break;
                  } while (true);
                  if (_jspx_eval_sql_005fupdate_005f1 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                    out = _jspx_page_context.popBody();
                    _jspx_push_body_count_sql_005fupdate_005f1[0]--;
                  }
                }
                if (_jspx_th_sql_005fupdate_005f1.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
                  return;
                }
              } catch (java.lang.Throwable _jspx_exception) {
                while (_jspx_push_body_count_sql_005fupdate_005f1[0]-- > 0)
                  out = _jspx_page_context.popBody();
                _jspx_th_sql_005fupdate_005f1.doCatch(_jspx_exception);
              } finally {
                _jspx_th_sql_005fupdate_005f1.doFinally();
              }
              _005fjspx_005ftagPool_005fsql_005fupdate_0026_005fvar_005fdataSource.reuse(_jspx_th_sql_005fupdate_005f1);
              _jspx_th_sql_005fupdate_005f1_reused = true;
            } finally {
              org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_sql_005fupdate_005f1, _jsp_getInstanceManager(), _jspx_th_sql_005fupdate_005f1_reused);
            }
            out.write("\r\n");
            out.write("\t\t\t\t ");


				 if (usersdiv!=null) {
	     for (int i=0;i<usersdiv.length;i++){
	    	 int j=i+1;
	     
	     String sql = "INSERT INTO xx_doc_divisions_hierarchy (division,document_type,level,hierarchy_id,document_id,userid, Days)" +
	             "VALUES ('"+Division_String+"','"+DType+"',"+j+",'"+hierIddiv+"','"+document_id+"','"+usersdiv[i]+"',"+divisionnumber[i]+")";
		 stmt1.executeUpdate(sql); 
	     }  
			//	 System.out.println("..3....updated divn assignees...."); 
	 }
	}
	 String sqlupd = null;
     if(initatedfrm.equalsIgnoreCase("recreate")){
    	 Statement stmtupd = conn.createStatement();
    	 if (usersdiv!=null && userszon!=null) {
    	      sqlupd = "update xx_document_mapping set Division_HierarchyID="+hierIddiv+",HierarchyType='Both',Zone_HierarchyID="+hierIdzon+" where Document_Map_ID ="+document_id;
    	 } else if (userszon!=null) {
    		 sqlupd = "update xx_document_mapping set HierarchyType='Both',Zone_HierarchyID="+hierIdzon+" where Document_Map_ID ="+document_id;
    	 } else if (usersdiv!=null) {
    		 sqlupd = "update xx_document_mapping set Division_HierarchyID="+hierIddiv+",HierarchyType='Both'  where Document_Map_ID ="+document_id;
    	 } else { 
    	//	 sqlupd = "update xx_document_mapping set Division_HierarchyID=null, HierarchyType='Both',Zone_HierarchyID=null where Document_Map_ID ="+document_id;
    	 }
    		 
    		 stmt.executeUpdate(sqlupd); 
    		 String sql1 = "Select * from xx_document_mapping where Document_Map_ID ="+document_id;
  		 ResultSet rs1 = selectStmt.executeQuery(sql1);
  		Date sub_date4=null;
  		Date sub_date5=null;
  		
 	     while(rs1.next()){
 	  	  forwd1 = rs1.getString("Forwarded");
 	  	sub_date4=rs1.getDate("Date_of_Submission");
 	  	sub_date5=rs1.getDate("DateFinalize");
 	  	  if (forwd1 == null) {forwd1="nm";}
 	  	  }
 	   SimpleDateFormat df= new SimpleDateFormat("dd/MM/yyyy");
 	   //java.util.Date sub_date5 = new java.util.Date(sub_date4.getTime());
 	  	 sub_date3=df.format(sub_date4);
 	  	SimpleDateFormat df1= new SimpleDateFormat("MM/dd/yyyy");
  	   
 	  	sub_date6=df1.format(sub_date5);
 	    System.out.println("111..22.forwrded="+forwd1+"date111..="+sub_date3);
     }else{
     
	    Statement stmtupd = conn.createStatement();
	     if (usersdiv!=null && userszon!=null) {
	    	 sqlupd = "update xx_document_mapping set Forwarded ='No',Division_HierarchyID="+hierIddiv+",HierarchyType='Both',Zone_HierarchyID="+hierIdzon+" where Document_Map_ID ="+document_id;
   	 } else if (userszon!=null) {
   		sqlupd = "update xx_document_mapping set Forwarded ='No', HierarchyType='Both',Zone_HierarchyID="+hierIdzon+" where Document_Map_ID ="+document_id;
   	 } else if (usersdiv!=null) {
   		sqlupd = "update xx_document_mapping set Forwarded ='No',Division_HierarchyID="+hierIddiv+",HierarchyType='Both' where Document_Map_ID ="+document_id;
   	 } else { 
   		sqlupd = "update xx_document_mapping set Forwarded ='No', HierarchyType='Both' where Document_Map_ID ="+document_id;
   	 }
	     
	     stmt.executeUpdate(sqlupd); 
     }
  }

if(initatedfrm.equalsIgnoreCase("recreate") && forwd1.equalsIgnoreCase("yes") ){
	
            out.write("\r\n");
            out.write("\t\t  <div style='vertical-align: baseline; padding: 10px; margin: 20px;'>\r\n");
            out.write("\t<center> <div class=\"alert alert-success\" align=\"center\" style=\"margin-top:100px; width:400px;\">\r\n");
            out.write("\t <strong>Success!</strong> User list has been updated successfully.\r\n");
            out.write("\t <br>\r\n");
            out.write("\t <br>\r\n");
            out.write("\t <input class='btn btn-primary' value='OK'  onClick=\"refreshAndClose()\" type='button'/>\r\n");
            out.write("\t </div></center>\r\n");
            out.write("</div>\r\n");
            out.write("\t ");

	 
	 
 }else  { 
String doc_id1=request.getParameter("document_id");
if(initatedfrm.equalsIgnoreCase("recreate")){
	submitiondate2 = sub_date3;
	//System.out.println("9999...doc-id="+ doc_id1+" .. initated=" + initatedfrm+"...dare2="+submitiondate2+"fdghfdhfdh.."+sub_date6);
	
            out.write("\r\n");
            out.write("\t<INPUT TYPE='HIDDEN' id=\"subdate9\" value=\"'");
            out.print(sub_date6 );
            out.write("'\">\r\n");
            out.write("\t");

	SimpleDateFormat df = new SimpleDateFormat("dd/MM/yyyy");
	String rd = df.format(new Date());
	if (rdstatus.equalsIgnoreCase("0"))  {
	
            out.write("\t\t\t\t\t\t\t\t\r\n");
            out.write("\t\r\n");
            out.write("\t<center><div id=\"changesubmitiondate\" class=\"alert alert-success\" align=\"center\" style=\"margin-top:100px; width:500px; height:220px; color:black;\">\t\r\n");
            out.write("\t<br> <br>&nbsp;Date of submission to Railways: <input type=\"text\" name=\"Dateofsubmission3\" id=\"Dateofsubmission3\" style=\"width: 100px; text-align:center;\" value='");
            out.print(submitiondate2);
            out.write("'><br>\r\n");
            out.write("\t<span style=\"color:blue;\"><br>(Please change the date, if required before submission of the document)</span><br><br> <br>\r\n");
            out.write("<button id=\"appcancle\" class=\"btn btn-primary\" onclick=\"fwdpk1('");
            out.print(doc_id1);
            out.write("', '");
            out.print(initatedfrm);
            out.write("');\">OK</button>\r\n");
            out.write("<br> </div></center>\r\n");
 } else { 
            out.write("\r\n");
            out.write("\r\n");
            out.write("\t<center><div id=\"changesubmitiondate\" class=\"alert alert-success\" align=\"center\" style=\"margin-top:100px; width:500px; height:220px; color:black;\">\t\r\n");
            out.write("\t<br> <br>&nbsp;Date of submission to Railways: <input type=\"text\" name=\"Dateofsubmission3\" id=\"Dateofsubmission3\" style=\"width: 100px; text-align:center; background-color: lightgray;\" value='");
            out.print(rd);
            out.write("' readonly='true'><br>\r\n");
            out.write("\t<br><br> <br>\r\n");
            out.write("<button id=\"appcancle\" class=\"btn btn-primary\" onclick=\"fwdpk1('");
            out.print(doc_id1);
            out.write("', '");
            out.print(initatedfrm);
            out.write("');\">OK</button>\r\n");
            out.write("<br> </div></center>\r\n");

}
//System.out.println("8888...forwd1="+ forwd1+" .. date2="+submitiondate2);
} else {
	//background-color:#F0FFFF; var $j=jQuery.noConflict();$j('#changesubmitiondate').dialog('close');
	// System.out.println("777...forwd1="+ forwd1+" .. date2="+submitiondate2);
	 
            out.write('\r');
            out.write('\n');
            //  c:redirect
            org.apache.taglibs.standard.tag.rt.core.RedirectTag _jspx_th_c_005fredirect_005f0 = (org.apache.taglibs.standard.tag.rt.core.RedirectTag) _005fjspx_005ftagPool_005fc_005fredirect_0026_005furl.get(org.apache.taglibs.standard.tag.rt.core.RedirectTag.class);
            boolean _jspx_th_c_005fredirect_005f0_reused = false;
            try {
              _jspx_th_c_005fredirect_005f0.setPageContext(_jspx_page_context);
              _jspx_th_c_005fredirect_005f0.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fif_005f1);
              // /Admin/forwardingUser.jsp(877,0) name = url type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_c_005fredirect_005f0.setUrl("forwarding_usr.jsp");
              int _jspx_eval_c_005fredirect_005f0 = _jspx_th_c_005fredirect_005f0.doStartTag();
              if (_jspx_eval_c_005fredirect_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
                if (_jspx_eval_c_005fredirect_005f0 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                  out = org.apache.jasper.runtime.JspRuntimeLibrary.startBufferedBody(_jspx_page_context, _jspx_th_c_005fredirect_005f0);
                }
                do {
                  out.write('\r');
                  out.write('\n');
                  //  c:param
                  org.apache.taglibs.standard.tag.rt.core.ParamTag _jspx_th_c_005fparam_005f0 = (org.apache.taglibs.standard.tag.rt.core.ParamTag) _005fjspx_005ftagPool_005fc_005fparam_0026_005fvalue_005fname_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.ParamTag.class);
                  boolean _jspx_th_c_005fparam_005f0_reused = false;
                  try {
                    _jspx_th_c_005fparam_005f0.setPageContext(_jspx_page_context);
                    _jspx_th_c_005fparam_005f0.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fredirect_005f0);
                    // /Admin/forwardingUser.jsp(878,0) name = name type = null reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
                    _jspx_th_c_005fparam_005f0.setName("document_id");
                    // /Admin/forwardingUser.jsp(878,0) name = value type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
                    _jspx_th_c_005fparam_005f0.setValue(doc_id1 );
                    int _jspx_eval_c_005fparam_005f0 = _jspx_th_c_005fparam_005f0.doStartTag();
                    if (_jspx_th_c_005fparam_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
                      return;
                    }
                    _005fjspx_005ftagPool_005fc_005fparam_0026_005fvalue_005fname_005fnobody.reuse(_jspx_th_c_005fparam_005f0);
                    _jspx_th_c_005fparam_005f0_reused = true;
                  } finally {
                    org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fparam_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fparam_005f0_reused);
                  }
                  out.write('\r');
                  out.write('\n');
                  //  c:param
                  org.apache.taglibs.standard.tag.rt.core.ParamTag _jspx_th_c_005fparam_005f1 = (org.apache.taglibs.standard.tag.rt.core.ParamTag) _005fjspx_005ftagPool_005fc_005fparam_0026_005fvalue_005fname_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.ParamTag.class);
                  boolean _jspx_th_c_005fparam_005f1_reused = false;
                  try {
                    _jspx_th_c_005fparam_005f1.setPageContext(_jspx_page_context);
                    _jspx_th_c_005fparam_005f1.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fredirect_005f0);
                    // /Admin/forwardingUser.jsp(879,0) name = name type = null reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
                    _jspx_th_c_005fparam_005f1.setName("submitiondate");
                    // /Admin/forwardingUser.jsp(879,0) name = value type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
                    _jspx_th_c_005fparam_005f1.setValue(submitiondate2 );
                    int _jspx_eval_c_005fparam_005f1 = _jspx_th_c_005fparam_005f1.doStartTag();
                    if (_jspx_th_c_005fparam_005f1.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
                      return;
                    }
                    _005fjspx_005ftagPool_005fc_005fparam_0026_005fvalue_005fname_005fnobody.reuse(_jspx_th_c_005fparam_005f1);
                    _jspx_th_c_005fparam_005f1_reused = true;
                  } finally {
                    org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fparam_005f1, _jsp_getInstanceManager(), _jspx_th_c_005fparam_005f1_reused);
                  }
                  out.write('\r');
                  out.write('\n');
                  //  c:param
                  org.apache.taglibs.standard.tag.rt.core.ParamTag _jspx_th_c_005fparam_005f2 = (org.apache.taglibs.standard.tag.rt.core.ParamTag) _005fjspx_005ftagPool_005fc_005fparam_0026_005fvalue_005fname_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.ParamTag.class);
                  boolean _jspx_th_c_005fparam_005f2_reused = false;
                  try {
                    _jspx_th_c_005fparam_005f2.setPageContext(_jspx_page_context);
                    _jspx_th_c_005fparam_005f2.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fredirect_005f0);
                    // /Admin/forwardingUser.jsp(880,0) name = name type = null reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
                    _jspx_th_c_005fparam_005f2.setName("initatedfrm");
                    // /Admin/forwardingUser.jsp(880,0) name = value type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
                    _jspx_th_c_005fparam_005f2.setValue(initatedfrm );
                    int _jspx_eval_c_005fparam_005f2 = _jspx_th_c_005fparam_005f2.doStartTag();
                    if (_jspx_th_c_005fparam_005f2.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
                      return;
                    }
                    _005fjspx_005ftagPool_005fc_005fparam_0026_005fvalue_005fname_005fnobody.reuse(_jspx_th_c_005fparam_005f2);
                    _jspx_th_c_005fparam_005f2_reused = true;
                  } finally {
                    org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fparam_005f2, _jsp_getInstanceManager(), _jspx_th_c_005fparam_005f2_reused);
                  }
                  out.write('\r');
                  out.write('\n');
                  int evalDoAfterBody = _jspx_th_c_005fredirect_005f0.doAfterBody();
                  if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
                    break;
                } while (true);
                if (_jspx_eval_c_005fredirect_005f0 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                  out = _jspx_page_context.popBody();
                }
              }
              if (_jspx_th_c_005fredirect_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
                return;
              }
              _005fjspx_005ftagPool_005fc_005fredirect_0026_005furl.reuse(_jspx_th_c_005fredirect_005f0);
              _jspx_th_c_005fredirect_005f0_reused = true;
            } finally {
              org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fredirect_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fredirect_005f0_reused);
            }
            out.write("\r\n");
            out.write("\t \r\n");
            out.write("\t ");

}
}
 
            out.write("\r\n");
            out.write(" <!--  <div style='vertical-align: baseline; padding: 10px; margin: 20px;'>\r\n");
            out.write(" <div class=\"alert alert-success\">\r\n");
            out.write(" <strong>Success!</strong> Document has been saved successfully.\r\n");
            out.write(" <br>\r\n");
            out.write(" <br>\r\n");
            out.write(" &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button type=\"button\" class=\"btn btn-primary\" onclick=\"javascript:forwardlistusers('");
            out.print(doc_id);
            out.write("');\">want to forward now</button>\t\t\t\t\r\n");
            out.write(" \r\n");
            out.write("</div>\r\n");
            out.write("</div> -->\r\n");

 }catch(Exception e){
	 e.printStackTrace();
 } finally {
	    try { conn.close(); } catch (Exception e) { /* ignored */ }
 }
 } else if(stageofpage.equalsIgnoreCase("second")){
	 String doc_id1=request.getParameter("document_id");
	 String initatedfrm=request.getParameter("initatedfrm1");
	 String sdate4=request.getParameter("Dateofsubmission3");
	 Date date = new SimpleDateFormat("dd/MM/yyyy").parse(sdate4);
		java.sql.Date subDate = new java.sql.Date(date.getTime());
		System.out.println("second..."+doc_id1+"date="+sdate4+"ini.."+initatedfrm);
	  Connection conn=null;
	 try {
			Context initCtx = new InitialContext();
			Context envCtx = (Context) initCtx.lookup("java:comp/env");
			DataSource ds = (DataSource) envCtx.lookup("jdbc/MySQLDB");

			conn = ds.getConnection();

	 Statement stmtupd1 = conn.createStatement();
	     String sqlupd1 = "update xx_document_mapping set Date_of_Submission='"+subDate+"' where Document_Map_ID ="+doc_id1;
	     System.out.println("update sql....."+sqlupd1);
		 
	     stmtupd1.executeUpdate(sqlupd1); 

	 
            out.write("\r\n");
            out.write("\t ");
            //  c:redirect
            org.apache.taglibs.standard.tag.rt.core.RedirectTag _jspx_th_c_005fredirect_005f1 = (org.apache.taglibs.standard.tag.rt.core.RedirectTag) _005fjspx_005ftagPool_005fc_005fredirect_0026_005furl.get(org.apache.taglibs.standard.tag.rt.core.RedirectTag.class);
            boolean _jspx_th_c_005fredirect_005f1_reused = false;
            try {
              _jspx_th_c_005fredirect_005f1.setPageContext(_jspx_page_context);
              _jspx_th_c_005fredirect_005f1.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fif_005f1);
              // /Admin/forwardingUser.jsp(924,2) name = url type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_c_005fredirect_005f1.setUrl("forwarding_usr.jsp");
              int _jspx_eval_c_005fredirect_005f1 = _jspx_th_c_005fredirect_005f1.doStartTag();
              if (_jspx_eval_c_005fredirect_005f1 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
                if (_jspx_eval_c_005fredirect_005f1 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                  out = org.apache.jasper.runtime.JspRuntimeLibrary.startBufferedBody(_jspx_page_context, _jspx_th_c_005fredirect_005f1);
                }
                do {
                  out.write('\r');
                  out.write('\n');
                  //  c:param
                  org.apache.taglibs.standard.tag.rt.core.ParamTag _jspx_th_c_005fparam_005f3 = (org.apache.taglibs.standard.tag.rt.core.ParamTag) _005fjspx_005ftagPool_005fc_005fparam_0026_005fvalue_005fname_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.ParamTag.class);
                  boolean _jspx_th_c_005fparam_005f3_reused = false;
                  try {
                    _jspx_th_c_005fparam_005f3.setPageContext(_jspx_page_context);
                    _jspx_th_c_005fparam_005f3.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fredirect_005f1);
                    // /Admin/forwardingUser.jsp(925,0) name = name type = null reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
                    _jspx_th_c_005fparam_005f3.setName("document_id");
                    // /Admin/forwardingUser.jsp(925,0) name = value type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
                    _jspx_th_c_005fparam_005f3.setValue(doc_id1 );
                    int _jspx_eval_c_005fparam_005f3 = _jspx_th_c_005fparam_005f3.doStartTag();
                    if (_jspx_th_c_005fparam_005f3.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
                      return;
                    }
                    _005fjspx_005ftagPool_005fc_005fparam_0026_005fvalue_005fname_005fnobody.reuse(_jspx_th_c_005fparam_005f3);
                    _jspx_th_c_005fparam_005f3_reused = true;
                  } finally {
                    org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fparam_005f3, _jsp_getInstanceManager(), _jspx_th_c_005fparam_005f3_reused);
                  }
                  out.write('\r');
                  out.write('\n');
                  //  c:param
                  org.apache.taglibs.standard.tag.rt.core.ParamTag _jspx_th_c_005fparam_005f4 = (org.apache.taglibs.standard.tag.rt.core.ParamTag) _005fjspx_005ftagPool_005fc_005fparam_0026_005fvalue_005fname_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.ParamTag.class);
                  boolean _jspx_th_c_005fparam_005f4_reused = false;
                  try {
                    _jspx_th_c_005fparam_005f4.setPageContext(_jspx_page_context);
                    _jspx_th_c_005fparam_005f4.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fredirect_005f1);
                    // /Admin/forwardingUser.jsp(926,0) name = name type = null reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
                    _jspx_th_c_005fparam_005f4.setName("submitiondate");
                    // /Admin/forwardingUser.jsp(926,0) name = value type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
                    _jspx_th_c_005fparam_005f4.setValue(sdate4 );
                    int _jspx_eval_c_005fparam_005f4 = _jspx_th_c_005fparam_005f4.doStartTag();
                    if (_jspx_th_c_005fparam_005f4.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
                      return;
                    }
                    _005fjspx_005ftagPool_005fc_005fparam_0026_005fvalue_005fname_005fnobody.reuse(_jspx_th_c_005fparam_005f4);
                    _jspx_th_c_005fparam_005f4_reused = true;
                  } finally {
                    org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fparam_005f4, _jsp_getInstanceManager(), _jspx_th_c_005fparam_005f4_reused);
                  }
                  out.write('\r');
                  out.write('\n');
                  //  c:param
                  org.apache.taglibs.standard.tag.rt.core.ParamTag _jspx_th_c_005fparam_005f5 = (org.apache.taglibs.standard.tag.rt.core.ParamTag) _005fjspx_005ftagPool_005fc_005fparam_0026_005fvalue_005fname_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.ParamTag.class);
                  boolean _jspx_th_c_005fparam_005f5_reused = false;
                  try {
                    _jspx_th_c_005fparam_005f5.setPageContext(_jspx_page_context);
                    _jspx_th_c_005fparam_005f5.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_c_005fredirect_005f1);
                    // /Admin/forwardingUser.jsp(927,0) name = name type = null reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
                    _jspx_th_c_005fparam_005f5.setName("initatedfrm");
                    // /Admin/forwardingUser.jsp(927,0) name = value type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
                    _jspx_th_c_005fparam_005f5.setValue(initatedfrm );
                    int _jspx_eval_c_005fparam_005f5 = _jspx_th_c_005fparam_005f5.doStartTag();
                    if (_jspx_th_c_005fparam_005f5.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
                      return;
                    }
                    _005fjspx_005ftagPool_005fc_005fparam_0026_005fvalue_005fname_005fnobody.reuse(_jspx_th_c_005fparam_005f5);
                    _jspx_th_c_005fparam_005f5_reused = true;
                  } finally {
                    org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fparam_005f5, _jsp_getInstanceManager(), _jspx_th_c_005fparam_005f5_reused);
                  }
                  out.write("\r\n");
                  out.write("\r\n");
                  int evalDoAfterBody = _jspx_th_c_005fredirect_005f1.doAfterBody();
                  if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
                    break;
                } while (true);
                if (_jspx_eval_c_005fredirect_005f1 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                  out = _jspx_page_context.popBody();
                }
              }
              if (_jspx_th_c_005fredirect_005f1.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
                return;
              }
              _005fjspx_005ftagPool_005fc_005fredirect_0026_005furl.reuse(_jspx_th_c_005fredirect_005f1);
              _jspx_th_c_005fredirect_005f1_reused = true;
            } finally {
              org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fredirect_005f1, _jsp_getInstanceManager(), _jspx_th_c_005fredirect_005f1_reused);
            }
            out.write("\r\n");
            out.write("\t \r\n");
            out.write("\t ");

 }catch(Exception e){
	 e.printStackTrace();
 } finally {
	    try { conn.close(); } catch (Exception e) { /* ignored */ }
 }
 }
	 
            out.write("\r\n");
            out.write("\r\n");
            out.write("\r\n");
            out.write(" ");
            int evalDoAfterBody = _jspx_th_c_005fif_005f1.doAfterBody();
            if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
              break;
          } while (true);
        }
        if (_jspx_th_c_005fif_005f1.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
          return;
        }
        _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.reuse(_jspx_th_c_005fif_005f1);
        _jspx_th_c_005fif_005f1_reused = true;
      } finally {
        org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fif_005f1, _jsp_getInstanceManager(), _jspx_th_c_005fif_005f1_reused);
      }
      out.write("\r\n");
      out.write(" \r\n");
      out.write(" \r\n");
      out.write(" \r\n");
      out.write(" \r\n");
      out.write(" </form>\r\n");
      out.write(" </body>\r\n");
      out.write(" <script>\r\n");
      out.write(" $('.Blocked').change( function() {\r\n");
      out.write("\t    $(this).parents(\"tr:eq(0)\").find(\".textbox\").prop(\"disabled\", !this.checked).val(''); \r\n");
      out.write("\t   ; \r\n");
      out.write("\t});\r\n");
      out.write(" </script>\r\n");
      out.write(" </html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
